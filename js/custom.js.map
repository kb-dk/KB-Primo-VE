{"version":3,"sources":["node_modules/browser-pack/_prelude.js","primo-explore/custom/45KBDK_KGL-KGL/js/brokenLinkFeedback/prmReportProblemAfter.js","primo-explore/custom/45KBDK_KGL-KGL/js/categorize-pickup-locations/kbPickupLocations.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/categorize-pickup-locations/prmRequestAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/chat-box/scriptIds.constant.js","primo-explore/custom/45KBDK_KGL-KGL/js/edit-profile/kbEditProfile.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/edit-profile/prmPersonalInfoAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/footerAndHelp/kbHelp.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/footerAndHelp/kbPrimoFooter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/footerAndHelp/prmExploreFooterAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/help-page/kbHelpPage.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/help-page/kbHelpPageHeader.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/home/kbHome.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/language-and-pincode/kbEditPincode.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/language-and-pincode/kbLanguage.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/language-and-pincode/kbMoveBecomeUser.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/language-and-pincode/prmUserAreaExpandableAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/main.js","primo-explore/custom/45KBDK_KGL-KGL/js/move-request-another-bin/prmServiceButtonAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/navigation-header/kbNavigationHeader.js","primo-explore/custom/45KBDK_KGL-KGL/js/navigation-header/prmTopBarBefore.js","primo-explore/custom/45KBDK_KGL-KGL/js/open-items-location-filter/prmLocationItemsAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/pickup-numbers/pickUpNumbers.service.js","primo-explore/custom/45KBDK_KGL-KGL/js/pickup-numbers/prmRequestsAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/resource-recommender/prmResourceRecommenderAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/services/getTranslations.service.js","primo-explore/custom/45KBDK_KGL-KGL/js/special-view/prmSearchBarAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/node_modules/kb-primo-ve-announcement/dist/index.js","primo-explore/custom/45KBDK_KGL-KGL/node_modules/kb-primo-ve-hide-new-user-if-loggedin/dist/index.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","this","changeHoverLabel","angular","element","document","querySelectorAll","addEventListener","closeReportBrokenLink","header","append","_this","getTranslationsService","_getTranslations","lang","viewName","then","response","label","data","addLabelAsStylingToButton","catch","err","console","error","text","css","style","createElement","appendChild","createTextNode","getElementsByTagName","PrmReportProblemAfterController","$element","$location","location","search","vid","$inject","PrmReportProblemAfterConfig","name","config","controller","undefined","KbPickupLocationsController","intervalIdFindButton","timesRunIntervalIdFindButton","setInterval","findRequestButtonAndAttachJavascriptToIt","clearInterval","forEach","mdOption","display","querySelector","labels","index","fontWeight","classList","add","remove","openOrCloseALocationGroup","event","stopImmediatePropagation","children","currentTarget","parentNode","j","target","timesRunIntervalIdFindPickupLocationSelect","intervalIdFindPickupLocationSelect","pickupLocationSelectInput","addCssAndJavascriptEventsToLabelsAndOptions","prmServiceButtons","startSearchingForPickupLocationField","KbPickupLocationsConfig","PrmRequestAfterConfig","template","scriptIds","en","da","KbEditProfileController","KbEditProfileConfig","templateUrl","PrmPersonalInfoAfterConfig","bindings","parentCtrl","getHelpTextFromAPI","help","createHelpJson","translationObject","subheaders","Object","keys","filter","v","startsWith","subheadersLength","options","mainHeader","push","subheader","submenu","iconset","icondefinition","view","bodyContent","helpMenu","getElementById","hasClass","$mdDialog","show","contentElement","parent","getElementsByName","hasBackdrop","multiple","clickOutsideToClose","fullscreen","focusOnOpen","cancel","id","KbHelpController","$http","helpButtonTemplateUrl","helpMenuTemplateUrl","helpMenuHeaderTemplateUrl","helpMenuBodyTemplateUrl","helpSubMenuBodyTemplateUrl","KbHelpConfig","KbPrimoFooterConfig","PrmExploreFooterAfterConfig","KbHelpPageController","window","pageYOffset","visibility","indexOf","onclick","OnFixedButtonsHolderClick","showScrollButton","scrollTo","top","left","behavior","KbHelpPageConfig","KbHelpPageHeaderController","KbHelpPageHeaderConfig","replace","KbHomeController","KbHomeConfig","KbEditPincodeController","count","userSignedId","userButtons","editPincodeItem","menuItem","insertBefore","firstChild","nextSibling","KbEditPincodeConfig","newLang","$window","href","absUrl","KbLanguageController","$rootScope","KbLanguageConfig","$intervalId","$interval","findBecomeUserDiv","intervalId","becomeUserDiv","moveBecomeUserDiv","KbMoveBecomeUserController","KbMoveBecomeUserConfig","PrmUserAreaExpandableAfterConfig","url","query","_kbHome","_prmSearchBarAfter","_prmPersonalInfoAfter","_kbEditProfile","_kbHelpPage","_kbHelpPageHeader","_prmExploreFooterAfter","_kbPrimoFooter","_kbHelp","_prmTopBarBefore","_kbNavigationHeader","_prmUserAreaExpandableAfter","_kbLanguage","_kbEditPincode","_kbMoveBecomeUser","_scriptIds","_prmLocationItemsAfter","_prmServiceButtonAfter","_kbPickupLocations","_prmRequestAfter","_pickUpNumbers","_prmRequestsAfter","_prmReportProblemAfter","_prmResourceRecommenderAfter","constant","substring","pathname","log","service","GetTranslationsService","component","PrmSearchBarAfterConfig","PrmTopBarBeforeConfig","KbNavigationHeaderConfig","PrmLocationItemsAfterConfig","PrmServiceButtonAfterConfig","PickUpNumbersService","PrmRequestsAfterConfig","PrmResourceRecommenderAfterConfig","AlmaRequestOther","textContent","container","tagName","addClass","requestButtons","getElementsByClassName","backButtons","_i","PrmServiceButtonAfterController","getMenuPointsFromPI","parentElement","$event","menu","createMenuJson","_this2","items","links","KbNavigationHeaderController","filterBtn1","filterBtn2","filterDiv","triggerHandler","activateFilter","PrmLocationItemsAfterController","_getTranslation","pickUpNumber","requestNumber","getPickupLabel","pickupLabel","addPickupLineToReservation","pickup_id","newElement","parentLocation","_parentLocation","prepend","createAndInsertPickupNumbers","reservations","createAndInsertPickupNumber","message","getFirstLine","day","getDay","isDay","shelf_nr","getPickupNumber","pickUpNumbersService","insertPickUpNumber","requestId","getRequestId","fourDigits","getFourDigits","getShelfNr","requestsDisplay","firstLineRight","parseInt","PrmRequestsAfterController","setTimeout","addCloseButtonAndOpenRecommenderIfNeeded","elem","sessionStorage","hideRecommender","removeClass","PrmResourceRecommenderAfterController","language","get","key","await","yellowBox","changeSearchBarPlaceholder","placeHolderText","attr","PrmSearchBarAfterController","s","l","defineProperty","value","enumerable","configurable","writable","TypeError","$translate","$mdToast","$cookies","_dismissed","$on","AnnouncementService","_toastPromise","Promise","includes","hide","hideDelay","position","close","put","controllerAs","_dismiss","prototype","2","announcementService","$scope","PrmTopbarAfterConfig","primoExploreCtrl","3","./announcement/announcement.service","./announcement/prmTopbarAfter.component","isLoggedIn","ready","PrmTopNavBarLinksAfterConfig","./hide-new-user-if-loggedin/prmTopNavBarLinksAfter.component"],"mappings":"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","file":"custom.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","class PrmReportProblemAfterController {\n\n    constructor($element, $location,getTranslationsService) {\n        this.$element = $element;\n        this.getTranslationsService = getTranslationsService;\n        this.location = $location;\n        this.viewName = this.location.search().vid;\n        this.lang = this.location.search().lang;\n        this.lang = this.lang ? this.lang : 'da';\n    }\n\n    $onInit() {\n        this.changeHoverLabel();\n        let openReportBrokenLink = angular.element(document.querySelectorAll('prm-report-problem .report-problem-btn'))[0];\n        openReportBrokenLink.addEventListener('click', function () {\n            let closeReportBrokenLink = angular.element('<prm-icon svg-icon-set=\"navigation\" icon-definition=\"ic_close_24px\" id=\"closeReportBrokenLink\" onclick=\"document.querySelectorAll(\\'prm-report-problem .report-problem-btn\\')[0].click();\" id=\"closeReportBrokenLink\"><svg width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\" id=\"ic_close_24px_cache28\" y=\"240\" xmlns=\"http://www.w3.org/2000/svg\" fit=\"\" preserveAspectRatio=\"xMidYMid meet\" focusable=\"false\"><path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"></path></svg></prm-icon>');\n            let header = angular.element(document.querySelectorAll('prm-report-problem .report-header'));\n            if(header && closeReportBrokenLink){\n                header.append(closeReportBrokenLink);\n            }\n        });\n    }\n\n    changeHoverLabel(){\n        this.getTranslationsService._getTranslations(this.lang, this.viewName)\n            .then(response => {\n                let label = response.data['fulldisplay.reportproblem'];\n                this.addLabelAsStylingToButton(label);\n            })\n            .catch(err => {\n                console.error(err);\n                return err;\n            });\n    }\n\n    addLabelAsStylingToButton(text) {\n        let css =  `prm-report-problem .report-container .report-problem-btn:hover::before {\n                        content: \"${text}\";\n                     }` ;\n        let style = document.createElement('style');\n        style.appendChild(document.createTextNode(css));\n        document.getElementsByTagName('head')[0].appendChild(style);\n    }\n}\n\nPrmReportProblemAfterController.$inject = ['$element', '$location', 'getTranslationsService'];\n\nexport let PrmReportProblemAfterConfig = {\n    name: 'prmReportProblemAfter',\n    config: {\n        controller: PrmReportProblemAfterController,\n    }\n};","// Related to following Jira Issue:\n// https://sbprojects.statsbiblioteket.dk/jira/browse/BSV-213\nclass KbPickupLocationsController {\n    constructor(getTranslationsService) {\n        this.getTranslationsService = getTranslationsService;\n    };\n\n    // Test here:\n    // /discovery/fulldisplay?docid=alma99122559747705763&context=L&vid=45KBDK_KGL:KGL&lang=da&search_scope=MyInst_and_CI&adaptor=Local%20Search%20Engine&tab=Everything&query=any,contains,kvinde&offset=0\n    // Login\n    // Click on 'Bestil'\n    // Afhentningssted\n    $onInit() {\n        // prmServiceButtonAfter is called two times\n        if (KbPickupLocationsController.intervalIdFindButton === undefined) {\n            KbPickupLocationsController.timesRunIntervalIdFindButton = 0;\n            // We hook to prmServiceButtonAfter, and the button is not there in the beginning,\n            // so we need to wait a bit so the button is there.\n            KbPickupLocationsController.intervalIdFindButton = setInterval(KbPickupLocationsController.findRequestButtonAndAttachJavascriptToIt, 500);\n        }\n    }\n\n    $onDestroy(){\n        clearInterval(KbPickupLocationsController.intervalIdFindButton);\n    }\n\n    static addCssAndJavascriptEventsToLabelsAndOptions() {\n        const mdOptions = document.querySelectorAll('md-select-menu md-optgroup md-option');\n        mdOptions.forEach(mdOption => {\n            mdOption.style.display = \"none\";\n            // It is a fix for the options which are further down the menu\n            // that is, for some weired reasons, menu won't get closed after choosing an option.\n            mdOption.addEventListener(\"click\", function () {\n                    if (document.querySelector('body > .md-select-menu-container')) {\n                        document.querySelector('body > .md-select-menu-container').style.display = 'none';\n                    }\n                }\n            );\n        });\n\n        const labels = document.querySelectorAll('md-select-menu md-optgroup label');\n        labels.forEach((label, index) => {\n            label.style.fontWeight = 'bold';\n            label.classList.add('plus');\n            label.classList.remove('minus');\n\n            label.addEventListener(\"click\", function () {\n                KbPickupLocationsController.openOrCloseALocationGroup(event, labels, index);\n            });\n        });\n    }\n\n    static openOrCloseALocationGroup(event, labels, i) {\n        event.stopImmediatePropagation();\n        let children = event.currentTarget.parentNode.children;\n        for (let j = 0; j < children.length; j++) {\n            if (children[j] !== event.target) {\n                if (children[j].style.display === \"none\") {\n                    children[j].style.display = \"flex\";\n                    labels[i].classList.add('minus');\n                    labels[i].classList.remove('plus');\n                } else {\n                    children[j].style.display = \"none\";\n                    labels[i].classList.add('plus');\n                    labels[i].classList.remove('minus');\n                }\n            }\n        }\n    }\n\n    static startSearchingForPickupLocationField() {\n        KbPickupLocationsController.timesRunIntervalIdFindPickupLocationSelect = 0;\n        KbPickupLocationsController.intervalIdFindPickupLocationSelect = setInterval(function () {\n            KbPickupLocationsController.timesRunIntervalIdFindPickupLocationSelect += 1;\n            const pickupLocationSelectInput = angular.element(document.querySelectorAll('#form_field_pickupLocation md-select'));\n            // When 'pickupLocation field' is found then attach the changes to its click event.\n            if (pickupLocationSelectInput.length) {\n                pickupLocationSelectInput[0].addEventListener(\"click\", KbPickupLocationsController.addCssAndJavascriptEventsToLabelsAndOptions);\n                clearInterval(KbPickupLocationsController.intervalIdFindButton);\n            }\n\n        }, 1000);\n    }\n\n    static findRequestButtonAndAttachJavascriptToIt() {\n        KbPickupLocationsController.timesRunIntervalIdFindButton += 1;\n        const prmServiceButtons = angular.element(document.querySelectorAll('prm-service-button button'));\n        if (KbPickupLocationsController.timesRunIntervalIdFindButton === 10 || (prmServiceButtons && prmServiceButtons.length)) {\n            clearInterval(KbPickupLocationsController.intervalIdFindButton);\n        }\n        if(prmServiceButtons){\n            for (let i = 0; i < prmServiceButtons.length; i++) {\n                prmServiceButtons[i].addEventListener(\"click\", KbPickupLocationsController.startSearchingForPickupLocationField);\n            }\n        }\n    }\n}\n\nKbPickupLocationsController.$inject = ['getTranslationsService'];\n\nexport let KbPickupLocationsConfig = {\n    name: 'kbPickupLocations',\n    config: {\n        controller: KbPickupLocationsController,\n    }\n};","\nexport let PrmRequestAfterConfig = {\n    name: 'prmRequestAfter',\n    config: {\n        template: `<kb-pickup-locations></kb-pickup-locations>`,\n    }\n}","export const scriptIds = {\n    'en': 'b19d8ae41c784590fd84ba51114c29d2',\n    'da': '668df01b6f2cd836279a993a8fc944ec'\n};","class KbEditProfileController {\n    constructor($element) {\n        this.$element = $element;\n    };\n\n    $postLink() {\n        // Move edit-profile button to the desired position\n        let container = angular.element(document.querySelector('md-card#personalDetails .md-toolbar-tools'));\n        container.append(this.$element);\n    };\n}\n\nKbEditProfileController.$inject = ['$element'];\nexport let KbEditProfileConfig = {\n    name: 'kbEditProfile',\n    config: {\n        controller: KbEditProfileController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/edit-profile/edit-profile.html';\n        }],\n    }\n};","export let PrmPersonalInfoAfterConfig = {\n    name: 'prmPersonalInfoAfter',\n    config: {\n        bindings: {parentCtrl: '<'},\n        template: `<kb-edit-profile></kb-edit-profile>`,\n    }\n};","\nclass KbHelpController {\n\n    constructor($http, $location, $mdDialog, viewName, getTranslationsService) {\n        this.getTranslationsService = getTranslationsService;\n        this.$http = $http;\n        this.$mdDialog = $mdDialog;\n        this.viewName = viewName;\n        this.location = $location;\n        this.lang = \"da\";\n        this.bodyContent = 'main-menu';\n        this.helpButtonTemplateUrl = 'custom/' + viewName + '/html/help-button/help-button.html';\n        this.helpMenuTemplateUrl = 'custom/' + viewName + '/html/help-button/help-menu.html';\n        this.helpMenuHeaderTemplateUrl = 'custom/' + viewName + '/html/help-button/help-menu-header.html';\n        this.helpMenuBodyTemplateUrl = 'custom/' + viewName + '/html/help-button/help-menu-body.html';\n        this.helpSubMenuBodyTemplateUrl = 'custom/' + viewName + '/html/help-button/help-sub-menu-body.html';\n        this.help = {};\n    };\n\n        $onInit() {\n            this.getHelpTextFromAPI();\n        }\n\n        getHelpTextFromAPI(){\n            let viewName = this.location.search().vid;\n            this._getTranslations(this.lang, viewName)\n                .then(response => {\n                    this.help = this.createHelpJson(response.data);\n                })\n                .catch(err => {\n                    console.error(err);\n                    return err;\n                });\n        }\n\n        createHelpJson(translationObject) {\n            let help = {};\n            let subheaders = Object.keys(translationObject).filter(v => v.startsWith('fulldisplay.help.subheader'));\n            help.options = [];\n            help.mainHeader = translationObject[\"fulldisplay.help.mainheader\"];\n            let subheadersLength =  subheaders ? subheaders.length : 0;\n\n            for (let i = 0; i < subheadersLength; i++) {\n                if (translationObject[`fulldisplay.help.subheader${i + 1}`] === 'line'){\n                    help.options.push({\n                        subheader: 'line',\n                    });\n                }else {\n                    help.options.push({\n                        subheader: translationObject[`fulldisplay.help.subheader${i + 1}`],\n                        submenu: translationObject[`fulldisplay.help.sub${i + 1}`],\n                        iconset: translationObject[`fulldisplay.help.iconset${i + 1}`],\n                        icondefinition: translationObject[`fulldisplay.help.icondefinition${i + 1}`],\n                    });\n                }\n            }\n            return help;\n        }\n\n\n        _getTranslations(lang, view){\n            return this.getTranslationsService._getTranslations(lang, view);\n        }\n\n\n\n    openHelpMenu() {\n        this.bodyContent = 'main-menu';\n        let helpMenu = document.getElementById('helpMenu');\n        // Remove and add md-dialog-container to the helpMenu so it doesn't interfere with Primo's\n        if (!angular.element(document.querySelectorAll('#helpMenu')).hasClass('md-dialog-container')) {\n            helpMenu.classList.add('md-dialog-container');\n            this.$mdDialog.show({\n                contentElement: '#helpMenu',\n                parent: angular.element(document.getElementsByName('kb-help')[0]),\n                // Not using standard backdrop because it is interfering with Primo's\n                hasBackdrop: false,\n                multiple: true,\n                clickOutsideToClose: false,\n                fullscreen: true,\n                focusOnOpen: true,\n            });\n        }\n    };\n\n        hideHelpMenu(){\n            this.$mdDialog.cancel();\n            let helpMenu = document.getElementById('helpMenu');\n            helpMenu.classList.remove('md-dialog-container');\n        };\n\n        changeBodyContent(id){\n            this.bodyContent = id;\n        };\n\n}\n\nKbHelpController.$inject = ['$http', '$location', '$mdDialog', 'viewName', 'getTranslationsService'];\n\nexport let KbHelpConfig = {\n    name: 'kbHelp',\n    config: {\n        controller: KbHelpController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/help-button/help.html';\n        }],\n     },\n};","export let KbPrimoFooterConfig = {\n    name: 'kbPrimoFooter',\n    config: {\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/footer/footer.html';\n        }],\n    }\n};","export let PrmExploreFooterAfterConfig = {\n    name: 'prmExploreFooterAfter',\n    config: {\n        bindings: {parentCtrl: '<'},\n        template: `<kb-primo-footer></kb-primo-footer>\n                   <kb-help parent-ctrl='$ctrl.parentCtrl'></kb-help>`,\n    }\n};","class KbHelpPageController {\n\n\n\n    constructor() {\n    };\n\n    static OnFixedButtonsHolderClick(){\n        window.scrollTo({\n            top: 0,\n            left: 0,\n            behavior: 'smooth'\n        });\n    };\n\n    showScrollButton(){\n        if(window.pageYOffset !== 0){\n            document.getElementById('fixedButtonsHolder').style.visibility = \"visible\";\n        } else{\n            document.getElementById('fixedButtonsHolder').style.visibility = \"hidden\";\n        }\n    }\n\n    $postLink() {\n        let url = window.location.search;\n        let index = url.indexOf('SPEC');\n        this.view = index > 0 ? 'special' : 'general';\n\n        document.getElementById('fixedButtonsHolder').onclick = KbHelpPageController.OnFixedButtonsHolderClick;\n        window.addEventListener(\"scroll\", this.showScrollButton);\n    };\n\n\n}\n\nexport let KbHelpPageConfig = {\n    name: 'kbHelpPage',\n    config: {\n        controller: KbHelpPageController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/help/kb-help-page.html';\n        }],\n    }\n};","class KbHelpPageHeaderController {\n\n    constructor() {\n    };\n\n    $postLink() {\n        let url = window.location.search;\n        let index = url.indexOf('SPEC');\n        this.view = index > 0 ? 'special' : 'general';\n    };\n}\n\nexport let KbHelpPageHeaderConfig = {\n    name: 'kbHelpPageHeader',\n    config: {\n        controller: KbHelpPageHeaderController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/help/kb-help-page-header.html';\n        }],\n    }\n};","class KbHomeController {\n\n    constructor($location) {\n        this.location = $location;\n    };\n\n    $postLink() {\n        this.vid = this.location.search().vid.replace(\":\", \"-\");\n        let index = this.vid.indexOf('SPEC');\n        this.view = index > 0 ? 'special' : 'general';\n    };\n}\n\nKbHomeController.$inject = ['$location'];\n\n\nexport let KbHomeConfig = {\n    name: 'kbHome',\n    config: {\n        controller: KbHomeController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/homepage/kb-homepage.html';\n        }],\n    }\n};","// https://sbprojects.statsbiblioteket.dk/jira/browse/BSV-239\nclass KbEditPincodeController {\n    constructor($location) {\n        this.location = $location;\n    };\n\n    $onInit() {\n        KbEditPincodeController.count = 0;\n        if (!KbEditPincodeController.id) {\n            KbEditPincodeController.id = setInterval(this.userSignedId, 500);\n        }\n\n    }\n\n    userSignedId() {\n        KbEditPincodeController.count += 1;\n        if (KbEditPincodeController.count >= 5){\n            clearInterval(KbEditPincodeController.id);\n            KbEditPincodeController.id = undefined;\n        }\n        let signInBtn = document.getElementById(\"signInBtn\");\n        if (signInBtn == null) {\n            clearInterval(KbEditPincodeController.id);\n            KbEditPincodeController.id = undefined;\n\n\n            let userButtons = angular.element(document.querySelectorAll('prm-user-area-expandable button.user-button'));\n            let editPincodeItem = angular.element(document.querySelector('kb-edit-pincode'));\n            for (let i = 0; i < userButtons.length; i++) {\n                userButtons[i].addEventListener('click', function () {\n                    let menuItem = angular.element(document.querySelector('md-menu-item.my-library-card-ctm'));\n                    menuItem[0].parentNode.insertBefore(editPincodeItem[0].firstChild, menuItem[0].nextSibling);\n                });\n            }\n        }\n    }\n}\n\nKbEditPincodeController.$inject = ['$location'];\n\nexport let KbEditPincodeConfig=  {\n    name: 'kbEditPincode',\n    config: {\n        bindings: {\n            parentCtrl: '<',\n        },\n        controller: KbEditPincodeController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/language-and-pincode/edit-pincode.html';\n        }],\n    }\n};","class KbLanguageController {\n\n    constructor($window, $location, $rootScope) {\n        this.$window = $window;\n        this.$location = $location;\n        this.$rootScope = $rootScope;\n    };\n\n    $onInit() {\n        this.lang = this.parentCtrl.lang;\n    }\n\n    changeLanguage() {\n        let newLang = this.lang === 'da'? 'en' : 'da';\n        this.$location.search('lang', newLang);\n        document.getElementsByTagName(\"html\")[0].lang = newLang;\n        this.$window.location.href = this.$location.absUrl();\n    }\n\n}\n\nKbLanguageController.$inject = ['$window', '$location', '$rootScope'];\n\nexport let KbLanguageConfig=  {\n    name: 'kbLanguage',\n    config: {\n        bindings: {\n            parentCtrl: '<',\n        },\n        controller: KbLanguageController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/language-and-pincode/language.html';\n        }],\n    }\n};","class KbMoveBecomeUserController {\n\n    constructor($interval, $element) {\n        this.$interval = $interval;\n        this.$element = $element;\n    };\n\n    $onInit() {\n        let _this = this;\n        this.$intervalId = this.$interval(function(){\n            _this.findBecomeUserDiv(_this.$intervalId);\n        }, 500, 10);\n    }\n\n    findBecomeUserDiv(intervalId){\n        const becomeUserDiv = angular.element(document.querySelectorAll('div[data-main-menu-item=\"new_user\"]'));\n        if (becomeUserDiv.length){\n            this.$interval.cancel(intervalId);\n            this.moveBecomeUserDiv(becomeUserDiv);\n        }\n    }\n\n    moveBecomeUserDiv(becomeUserDiv) {\n        let container = this.$element.parent();\n        container.append(becomeUserDiv);\n    }\n}\n\nKbMoveBecomeUserController.$inject = ['$interval', '$element'];\n\nexport let KbMoveBecomeUserConfig=  {\n    name: 'kbMoveBecomeUser',\n    config: {\n        controller: KbMoveBecomeUserController,\n    }\n};","export let PrmUserAreaExpandableAfterConfig=  {\n    name: 'prmUserAreaExpandableAfter',\n    config: {\n        bindings: {\n            parentCtrl: '<'\n        },\n        template: `<kb-language parent-ctrl='$ctrl.parentCtrl'></kb-language><kb-edit-pincode></kb-edit-pincode><kb-move-become-user></kb-move-become-user>`,\n    }\n};","// General services\nimport {GetTranslationsService } from \"./services/getTranslations.service\";\n\n// KB special view home for university thesis\nimport {KbHomeConfig} from './home/kbHome.component';\n\n// Special view\nimport {PrmSearchBarAfterConfig} from './special-view/prmSearchBarAfter.component';\n\n// Edit profile\nimport {PrmPersonalInfoAfterConfig} from './edit-profile/prmPersonalInfoAfter.component';\nimport {KbEditProfileConfig} from './edit-profile/kbEditProfile.component';\n\n// Help page\nimport {KbHelpPageConfig} from './help-page/kbHelpPage.component';\nimport {KbHelpPageHeaderConfig} from './help-page/kbHelpPageHeader.component';\n\n// Footer\nimport {PrmExploreFooterAfterConfig} from './footerAndHelp/prmExploreFooterAfter.component';\nimport {KbPrimoFooterConfig} from './footerAndHelp/kbPrimoFooter.component';\n\nimport {KbHelpConfig} from './footerAndHelp/kbHelp.component';\n\n// Navigation header\nimport {PrmTopBarBeforeConfig} from './navigation-header/prmTopBarBefore';\nimport {KbNavigationHeaderConfig} from './navigation-header/kbNavigationHeader';\n\n// Language switcher\nimport {PrmUserAreaExpandableAfterConfig} from './language-and-pincode/prmUserAreaExpandableAfter.component';\nimport {KbLanguageConfig} from './language-and-pincode/kbLanguage.component';\nimport {KbEditPincodeConfig} from './language-and-pincode/kbEditPincode.component';\nimport {KbMoveBecomeUserConfig} from './language-and-pincode/kbMoveBecomeUser.component';\n\n\n// ChatBox scriptId\nimport {scriptIds} from \"./chat-box/scriptIds.constant\";\n\n// Open items location filter\nimport {PrmLocationItemsAfterConfig} from \"./open-items-location-filter/prmLocationItemsAfter.component\";\n\n// Move request-another-volume\nimport {PrmServiceButtonAfterConfig} from \"./move-request-another-bin/prmServiceButtonAfter.component\";\n\n// Categorize pickup locations\nimport {KbPickupLocationsConfig} from \"./categorize-pickup-locations/kbPickupLocations.component\";\nimport {PrmRequestAfterConfig} from \"./categorize-pickup-locations/prmRequestAfter.component\";\n\n// Add pickup numbers\nimport {PickUpNumbersService } from \"./pickup-numbers/pickUpNumbers.service\";\nimport {PrmRequestsAfterConfig} from \"./pickup-numbers/prmRequestsAfter.component\";\n\n// Close broken link feedback\nimport {PrmReportProblemAfterConfig} from \"./brokenLinkFeedback/prmReportProblemAfter\";\n\n// Resource recommender\nimport {PrmResourceRecommenderAfterConfig} from \"./resource-recommender/prmResourceRecommenderAfter.component\";\n\nangular.module('viewCustom', ['angularLoad', 'ngMaterial'])\n    // .run(['$rootScope', ($rootScope) => {\n    //     console.log('viewName:',$rootScope);\n    //     // $rootScope.viewName = viewName;\n    // }])\n    .constant('viewName', (function () {\n            let url = window.location.search.substring(1);\n            let query = url.substring(url.indexOf('vid') + 4);\n            // in 'Alma Viewer page'\n            if(!url){\n                url = window.location.pathname;\n                query = url.substring(url.indexOf('/delivery/')+10);\n                query = query.substring(0, query.indexOf('/'));\n            }\n            // If there are other parameters after vid, then remove them\n            let vid = query.substring(0, query.indexOf('&')) ? query.substring(0, query.indexOf('&')) : query;\n        vid = vid.replace(\"%3A\", \"-\");\n        console.log('vid:',vid);\n        return vid.replace(\":\", \"-\");\n    })()\n    )\n\n    // ChatBox scriptId\n    .constant('scriptIds' , scriptIds)\n\n    // General services\n    .service('getTranslationsService', GetTranslationsService)\n\n    // Help page\n    .component(KbHelpPageHeaderConfig.name, KbHelpPageHeaderConfig.config)\n    .component(KbHelpPageConfig.name, KbHelpPageConfig.config)\n\n    // KB special view home for university thesis\n    .component(KbHomeConfig.name, KbHomeConfig.config)\n\n    // Special view\n    .component(PrmSearchBarAfterConfig.name, PrmSearchBarAfterConfig.config)\n\n    // Edit profile\n    .component(PrmPersonalInfoAfterConfig.name, PrmPersonalInfoAfterConfig.config)\n    .component(KbEditProfileConfig.name, KbEditProfileConfig.config)\n\n    // Footer and help\n    .component(PrmExploreFooterAfterConfig.name, PrmExploreFooterAfterConfig.config)\n    .component(KbPrimoFooterConfig.name, KbPrimoFooterConfig.config)\n\n   .component(KbHelpConfig.name, KbHelpConfig.config)\n\n    // Navigation header\n    .component(PrmTopBarBeforeConfig.name, PrmTopBarBeforeConfig.config)\n    .component(KbNavigationHeaderConfig.name, KbNavigationHeaderConfig.config)\n\n    // Open items location filter\n    .component(PrmLocationItemsAfterConfig.name, PrmLocationItemsAfterConfig.config)\n\n    // Move request-another-volume\n    .component(PrmServiceButtonAfterConfig.name, PrmServiceButtonAfterConfig.config)\n\n    // Language switcher and pincode and become user\n    .component(PrmUserAreaExpandableAfterConfig.name, PrmUserAreaExpandableAfterConfig.config)\n    .component(KbLanguageConfig.name, KbLanguageConfig.config)\n    .component(KbEditPincodeConfig.name, KbEditPincodeConfig.config)\n    .component(KbMoveBecomeUserConfig.name, KbMoveBecomeUserConfig.config)\n\n    // Add pickup numbers\n    .service('pickUpNumbersService', PickUpNumbersService)\n    .component(PrmRequestsAfterConfig.name, PrmRequestsAfterConfig.config)\n\n    // Categorize pickup locations\n    .component(PrmRequestAfterConfig.name, PrmRequestAfterConfig.config)\n    .component(KbPickupLocationsConfig.name, KbPickupLocationsConfig.config)\n\n    // Close report broken link feedback\n    .component(PrmReportProblemAfterConfig.name, PrmReportProblemAfterConfig.config)\n\n    // Resource recommender\n    .component(PrmResourceRecommenderAfterConfig.name, PrmResourceRecommenderAfterConfig.config)\n\n// Get more info at https://github.com/Det-Kongelige-Bibliotek/KB-Primo-VE-Announcement\nrequire('kb-primo-ve-announcement');\n\n// Get more info at https://github.com/Det-Kongelige-Bibliotek/KB-Primo-VE-Hide-New-User-If-Loggedin.git\nrequire('kb-primo-ve-hide-new-user-if-loggedin');\n\n// Get more info at https://github.com/Det-Kongelige-Bibliotek/KB-Primo-VE-libChat.git\n// require('kb-primo-ve-libchat');\n","class PrmServiceButtonAfterController {\n    constructor($element, $interval) {\n        this.$element = $element;\n        this.$interval = $interval;\n    };\n    $postLink() {\n        let _this = this;\n        this.intervalId = this.$interval(function(){\n            let AlmaRequestOther = angular.element(document.querySelector(\"span[translate='AlmaRequestOther']\"));\n            if(AlmaRequestOther.length){\n                _this.$interval.cancel(_this.intervalId);\n                AlmaRequestOther = AlmaRequestOther.parent().parent();\n                if(AlmaRequestOther[0].textContent === angular.element(_this.$element.parent())[0].textContent){\n                    let container = AlmaRequestOther.parent();\n                    while ((!container.hasClass(\"section-body\"))&&(container[0].tagName !== \"BODY\")){\n                        container = container.parent();\n                    }\n                    container.append(AlmaRequestOther.parent());\n                    AlmaRequestOther.parent().addClass('orderAtTheBottom');\n                    AlmaRequestOther.parent().css('float','right');\n                    let requestButtons = angular.element(document.querySelectorAll(\"span[translate='AlmaItemRequest']\"));\n                    for (let i = 0; i < requestButtons.length; i++) {\n                        requestButtons[i].addEventListener(\"click\", function(){\n                            if(document.getElementsByClassName(\"orderAtTheBottom\") && document.getElementsByClassName(\"orderAtTheBottom\").length){\n                                AlmaRequestOther.css('display', 'none');\n                            }\n\n                        });\n                    }\n                    let backButtons = angular.element(document.querySelectorAll(\"prm-opac-back-button button\"));\n                    for (let i = 0; i < backButtons.length; i++) {\n                        backButtons[i].addEventListener(\"click\", function(){\n                            if(document.getElementsByClassName(\"orderAtTheBottom\") && document.getElementsByClassName(\"orderAtTheBottom\").length){\n                                document.getElementsByClassName(\"orderAtTheBottom\")[0].remove();\n                                AlmaRequestOther.css('display', 'inline-block');\n                            }\n\n                        });\n                    }\n                }\n            }\n        }, 500, 5);\n    };\n}\n\nPrmServiceButtonAfterController.$inject = ['$element', '$interval'];\n\nexport let PrmServiceButtonAfterConfig = {\n    name: 'prmServiceButtonAfter',\n    config: {\n        bindings: {\n            parentCtrl: '<'\n        },\n        controller: PrmServiceButtonAfterController,\n    },\n}","class KbNavigationHeaderController {\n    constructor($element, $location, getTranslationsService) {\n        this.$element = $element;\n        this.getTranslationsService = getTranslationsService;\n        this.location = $location;\n        this.viewName = this.location.search().vid;\n    };\n\n    $postLink() {\n        this.getMenuPointsFromPI();\n        // Find containers parent element\n        let parentElement = this.$element.parent().parent().parent().parent();\n        // Move navigation header to the top\n        let container = angular.element(parentElement.children()[0]);\n        container.append(this.$element);\n    };\n\n    showBackToMenu($event){\n        document.getElementById('backToItems').style.display = 'block';\n    }\n\n    hideBackToMenu($event){\n        document.getElementById('backToItems').style.display = 'none';\n    }\n\n    getMenuPointsFromPI(){\n        this._getTranslations(this.lang, this.viewName)\n            .then(response => {\n                this.menu = this.createMenuJson(response.data);\n            })\n            .catch(err => {\n                console.error(err);\n                return err;\n            });\n    }\n\n    _getTranslations(lang, view){\n        return this.getTranslationsService._getTranslations(lang, view);\n    }\n\n    createMenuJson(translationObject) {\n        this.view = this.viewName.indexOf('SPEC') > 0 ? '.special' : '.general';\n        let menu = {};\n        menu.items = Object.keys(translationObject).filter(v => v.startsWith('fulldisplay.topnavigation'+ this.view +'.list.item'));\n        menu.links = Object.keys(translationObject).filter(v => v.startsWith('fulldisplay.topnavigation'+ this.view +'.list.link'));\n        return menu;\n    }\n}\n\nKbNavigationHeaderController.$inject = ['$element', '$location', 'getTranslationsService'];\n\nexport let KbNavigationHeaderConfig = {\n    name: 'kbNavigationHeader',\n    config: {\n        bindings: {\n            parentCtrl: '<'\n        },\n        controller: KbNavigationHeaderController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/navigation-header/navigation-header.html';\n        }],\n    },\n}","export let PrmTopBarBeforeConfig = {\n    name: 'prmTopBarBefore',\n    config: {\n        bindings: {\n            parentCtrl: '<'\n        },\n        template:`<kb-navigation-header parent-ctrl='$ctrl.parentCtrl'></kb-navigation-header>`,\n    }\n};","class PrmLocationItemsAfterController {\n    constructor($interval) {\n        this.$interval = $interval;\n    }\n\n    activateFilter(intervalId) {\n        // Two different filter buttons in different pages. Hopefully there is not more\n        let filterBtn1 = angular.element(document.querySelectorAll(\"prm-locations > div > button.md-icon-button.md-ink-ripple\"));\n        let filterBtn2 = angular.element(document.querySelectorAll(\"prm-location-items  div  button.md-icon-button.md-ink-ripple\"));\n        // If the filter div exists it means it is already open\n        let filterDiv = angular.element(document.querySelectorAll(\"prm-locations-filter md-input-container\"));\n\n        if (((filterBtn1 && filterBtn1.length) || (filterBtn2 && filterBtn2.length)) && !filterDiv.length) {\n            this.$interval.cancel(intervalId);\n            if (filterBtn1 && filterBtn1.length){\n                filterBtn1.triggerHandler('click');\n            }\n            if (filterBtn2 && filterBtn2.length){\n                filterBtn2.triggerHandler('click');\n            }\n        }else{\n            if (filterDiv && filterDiv.length){\n                this.$interval.cancel(intervalId);\n            }\n        }\n    }\n\n    $onInit() {\n        let _this = this;\n        this.$intervalId = this.$interval(function(){\n            _this.activateFilter(_this.$intervalId);\n        }, 500, 10);\n    }\n}\n\nPrmLocationItemsAfterController.$inject = ['$interval'];\n\nexport let PrmLocationItemsAfterConfig = {\n    name: 'prmLocationItemsAfter',\n    config: {\n        bindings: {\n            parentCtrl: '<'\n        },\n        controller: PrmLocationItemsAfterController\n    }\n};","/**\n * Service to insert the pickup numbers for the requested items.\n */\nexport class PickUpNumbersService {\n    constructor($location, getTranslationsService) {\n        this.getTranslationsService = getTranslationsService;\n        this.location = $location;\n    }\n\n    getPickupLabel(){\n        let lang = this.location.search().lang;\n        lang = lang ? lang : 'da';\n        let viewName = this.location.search().vid;\n        return this.getTranslationsService._getTranslation(lang , viewName, 'fulldisplay.pickupnumber');\n    }\n\n    insertPickUpNumber(pickUpNumber, requestNumber) {\n            this.getPickupLabel()\n                .then(pickupLabel => {\n                        if(!document.getElementById('pickup_number_'+requestNumber)){\n                            this.addPickupLineToReservation(pickupLabel, pickUpNumber, requestNumber);\n                        }\n\n                });\n    }\n\n    addPickupLineToReservation(pickupLabel, pickUpNumber, requestNumber) {\n        let pickup_id = 'pickup_number_' + requestNumber;\n        let newElement = \"<br/><span id='\" + pickup_id + \"' class='pickup_number'>\" + pickupLabel + \": </span>\" + pickUpNumber + \"<br/>\";\n        let container = document.querySelectorAll('prm-requests md-list md-list-item')[requestNumber];\n        if (container){\n            let parentLocation = container.querySelectorAll('p.request-location');\n            if(angular.element(parentLocation)){\n                angular.element(parentLocation).append(newElement);\n            }\n            for(let i=0; i<10; i++){\n                if(!document.getElementById(pickup_id)){\n                    let parentLocation = container.querySelectorAll('p.request-location');\n                    if(angular.element(parentLocation)){\n                        angular.element(parentLocation[0]).prepend(newElement);\n                    }\n                }\n            }\n        }\n    }\n}\n\nPickUpNumbersService.$inject = ['$location', 'getTranslationsService'];","// https://sbprojects.statsbiblioteket.dk/jira/browse/BSV-437\nclass PrmRequestsAfterController {\n\n    constructor($element, pickUpNumbersService, $interval) {\n        this.$element = $element;\n        this.pickUpNumbersService = pickUpNumbersService;\n        this.$interval = $interval;\n    }\n\n    $onInit() {\n        let _this = this;\n        this.$intervalId = this.$interval(function(){\n            _this.createAndInsertPickupNumbers(_this);\n        }, 500);\n    }\n\n    createAndInsertPickupNumbers(_this) {\n        let reservations = _this.$element.parent()[0].querySelectorAll('md-list-item');\n        for (let requestNumber = 0; requestNumber < reservations.length; requestNumber++) {\n            _this.createAndInsertPickupNumber(requestNumber, reservations);\n        }\n    }\n\n    createAndInsertPickupNumber(requestNumber, reservations) {\n        let message = this.getFirstLine(this.parentCtrl, requestNumber);\n        let day = this.getDay(message);\n        if (this.isDay(day)) {\n            let shelf_nr = this.getPickupNumber(requestNumber, day);\n            this.pickUpNumbersService.insertPickUpNumber(shelf_nr, requestNumber);\n        }\n    }\n\n    getPickupNumber(requestNumber, day) {\n        let requestId = this.getRequestId(requestNumber);\n        let fourDigits = this.getFourDigits(requestId);\n        return this.getShelfNr(day, fourDigits);\n    }\n\n    // Shelf number is a combination of day from the first line and the 4 digits from the the\n    // '13', '3573' => '13/3573'\n    getShelfNr(day, fourDigits) {\n        return `${day}/${fourDigits} `;\n    }\n\n    // Returns 7. to 11. characters from the end\n    // '42730335730005763' => '3573'\n    getFourDigits(requestId) {\n        return requestId.substring(requestId.length - 11, requestId.length - 7);\n    }\n\n// Example:\n    // => '42730335730005763'\n    getRequestId (requestNumber) {\n        return this.parentCtrl.requestsDisplay[requestNumber].requestId;\n    }\n\n    // Take out the characters nr. 9 and 10 from the end of the message\n    // Examples for the message:\n    // 1: REQUEST. On Hold Shelf until 13/06/2023 => '13'\n    // 2: REQUEST. Not Started. Your place in queue is: 1 => 'n '\n    getDay (message) {\n        return message.substring(message.length - 8, message.length - 10);\n    }\n\n    // Examples for the results:\n    // 1: => 'REQUEST. On Hold Shelf until 13/06/2023'\n    // 2: => 'REQUEST. Not Started. Your place in queue is: 1'\n    getFirstLine(parent, requestNumber) {\n        return parent.requestsDisplay[requestNumber].firstLineRight;\n    }\n\n    isDay(day) {\n        return parseInt(day) >= 1 && parseInt(day) <= 31;\n    }\n\n    $onDestroy(){\n    this.$interval.cancel(this.$intervalId);\n    }\n}\n\nPrmRequestsAfterController.$inject = ['$element', 'pickUpNumbersService', '$interval'];\n\nexport let PrmRequestsAfterConfig = {\n    name: 'prmRequestsAfter',\n    config: {\n        bindings: {\n            parentCtrl: '<'\n        },\n        controller: PrmRequestsAfterController,\n    }\n}","class PrmResourceRecommenderAfterController {\n\n    constructor($element) {\n        this.$element = $element;\n    }\n\n    $onInit() {\n        setTimeout(this.addCloseButtonAndOpenRecommenderIfNeeded, 1000, this.$element);\n    }\n\n    addCloseButtonAndOpenRecommenderIfNeeded(element) {\n        let parentElement = document.querySelectorAll('prm-resource-recommender > div:not(.main-banner-content)')[0];\n        const elem = document.getElementById('closeRecommender');\n        if (elem && parentElement){\n            angular.element(elem).addClass('visible');\n            parentElement.prepend(elem);\n            if (!sessionStorage.hideRecommender){\n                angular.element(elem).parent().addClass('visible');\n            }\n        }\n    }\n\n    closeRecommender(){\n        const elem = document.getElementById('closeRecommender');\n        angular.element(elem).parent().removeClass('visible');\n        sessionStorage.hideRecommender = true;\n    }\n}\n\nPrmResourceRecommenderAfterController.$inject = ['$element'];\n\nexport let PrmResourceRecommenderAfterConfig = {\n    name: 'prmResourceRecommenderAfter',\n    config: {\n        controller: PrmResourceRecommenderAfterController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/resource-recommender/close-button.html';\n        }],\n    }\n}","/**\n * Service to get translations from API.\n */\nexport class GetTranslationsService {\n    constructor($http) {\n        this.$http = $http;\n    }\n\n    // Retrieves translations from the API\n    _getTranslations(language, view){\n        return this.$http.get(`/primaws/rest/pub/translations/${view}?lang=${language}`);\n    }\n\n    // Retrieves a translation from the API\n    async _getTranslation(language, view, key){\n        let translations = await this._getTranslations(language, view);\n        return translations.data[key];\n    }\n}\n\nGetTranslationsService.$inject = ['$http'];","class PrmSearchBarAfterController {\n    constructor($element, getTranslationsService, $location) {\n        this.$element = $element;\n        this.getTranslationsService = getTranslationsService;\n        this.location = $location;\n    }\n\n    $onInit() {\n        // Do these operations only in Special view\n        if (this.location.search().vid.indexOf(\"SPECIALER\") !== -1) {\n            let _this = this;\n            setTimeout(function () {\n                // 1- Move the yellow search scope element into the search bar\n                // Find parent element\n                let parentElement = angular.element(document.querySelector('prm-search-bar form > div > div'))[0];\n                // Add the element as the first child of the parent\n                let yellowBox = document.getElementById('specialViewSearchScope');\n                yellowBox.style.display = \"flex\";\n                parentElement.prepend(yellowBox);\n\n                // 2- Change placeholder text in the search bar\n                // First hide the placeholder so the default one won't appear\n                // Get the translation from the API\n                // Wait 500 milliseconds, so the default translation for placeholder comes first\n                // And then overwrite the placeholder text and make it visible\n                angular.element(document.getElementById('searchBar')).addClass('hidePlaceholder');\n\n                let lang = _this.location.search().lang || 'da';\n                let viewName = _this.location.search().vid;\n                _this.changeSearchBarPlaceholder(lang, viewName);\n            }, 0);\n        }\n    }\n\n    changeSearchBarPlaceholder(lang, viewName) {\n        this.getTranslationsService._getTranslations(lang, viewName)\n            .then(response => {\n                let placeHolderText = response.data[\"fulldisplay.homepage.special.search.placeholder\"];\n                setTimeout(function () {\n                    angular.element(document.getElementById('searchBar')).removeClass('hidePlaceholder');\n                    angular.element(document.getElementById('searchBar')).attr('placeholder', placeHolderText);\n                }, 500);\n            })\n            .catch(err => {\n                console.error(err);\n                return err;\n            });\n    }\n}\n\nPrmSearchBarAfterController.$inject = ['$element', 'getTranslationsService', '$location'];\n\nexport let PrmSearchBarAfterConfig = {\n    name: 'prmSearchBarAfter',\n    config: {\n        bindings: {\n            parentCtrl: '<'\n        },\n        controller: PrmSearchBarAfterController,\n        templateUrl: [\"viewName\", function (viewName) {\n            return 'custom/' + viewName + '/html/special-view/search-scope.html';\n        }],\n    }\n};","!function r(s,a,c){function u(e,n){if(!a[e]){if(!s[e]){var t=\"function\"==typeof require&&require;if(!n&&t)return t(e,!0);if(l)return l(e,!0);var o=new Error(\"Cannot find module '\"+e+\"'\");throw o.code=\"MODULE_NOT_FOUND\",o}var i=a[e]={exports:{}};s[e][0].call(i.exports,function(n){return u(s[e][1][n]||n)},i,i.exports,r,s,a,c)}return a[e].exports}for(var l=\"function\"==typeof require&&require,n=0;n<c.length;n++)u(c[n]);return u}({1:[function(n,e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(n,e,t){return e&&i(n.prototype,e),t&&i(n,t),n};function i(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function r(n,e,t,o){var i=this;!function(n,e){if(!(n instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,r),this.$translate=n,this.$mdToast=e,this.$rootScope=t,this.$cookies=o,this._dismissed=!1,this.$rootScope.$on(\"$translateChangeSuccess\",function(){i._dismissed=!1})}(t.AnnouncementService=(o(r,[{key:\"_dismiss\",value:function(){this._dismissed=!0,this._toastPromise=null}},{key:\"display\",value:function(o){var i=this;return new Promise(function(e,t){!0!==i._dismissed?i.$translate(\"nui.message.announcement\").then(function(n){if(i.$cookies.get(\"announcement\")!==n){if(!n||[\"announcement\",\"&nbsp;\",\"\"].includes(n))return i._toastPromise&&!i._dismissed&&i.$mdToast.hide(),void t(\"No announcement found.\");i._toastPromise=i._toastPromise||i.$mdToast.show({hideDelay:!1,position:\"top\",controller:function(){return{close:function(){i.$mdToast.hide(),i.$translate(\"nui.message.announcement\").then(function(n){return i.$cookies.put(\"announcement\",n)})}}},controllerAs:\"$ctrl\",template:'\\n<md-toast class=\"page-notification\" style=\"top: 0px; position: sticky !important;\">\\n    <div class=\"md-toast-content\" style=\"box-shadow:none; width: 100%;\">\\n        <span class=\\'md-toast-text\\' flex translate=\\'nui.message.announcement\\'>\\n  </span>\\n    </div>\\n    <a class=\"close\" ng-click=\\'$ctrl.close()\\' aria-label=\"{{\\'nui.message.dismiss\\' | translate}}\"\\n       style=\"position: absolute; right: 1.5rem; top: 1.5rem;\">\\n        <prm-icon icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"close\">\\n        </prm-icon>\\n    </a>\\n</md-toast>\\n          '}),i._toastPromise.then(o).catch(o).then(function(){return i._dismiss()}),e()}else t(\"The announcement has been dismissed before.\")}):t(\"The announcement has been dismissed.\")})}}]),r)).$inject=[\"$translate\",\"$mdToast\",\"$rootScope\",\"$cookies\"]},{}],2:[function(n,e,t){\"use strict\";function o(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}Object.defineProperty(t,\"__esModule\",{value:!0});var i=(function(n,e,t){return e&&o(n.prototype,e),t&&o(n,t),n}(r,[{key:\"$onInit\",value:function(){this.announcementService.display().catch(function(n){n&&console.log(n)})}}]),r);function r(n,e,t,o){!function(n,e){if(!(n instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,r),this.announcementService=n,this.$scope=e,this.$element=t,this.$translate=o}i.$inject=[\"announcementService\",\"$scope\",\"$element\",\"$translate\"];t.PrmTopbarAfterConfig={name:\"prmTopbarAfter\",config:{controller:i,require:{primoExploreCtrl:\"^primoExplore\"}}}},{}],3:[function(n,e,t){\"use strict\";var o=n(\"./announcement/announcement.service\"),i=n(\"./announcement/prmTopbarAfter.component\");angular.module(\"viewCustom\").service(\"announcementService\",o.AnnouncementService).component(i.PrmTopbarAfterConfig.name,i.PrmTopbarAfterConfig.config)},{\"./announcement/announcement.service\":1,\"./announcement/prmTopbarAfter.component\":2}]},{},[3]);","!function t(o,i,a){function u(n,e){if(!i[n]){if(!o[n]){var r=\"function\"==typeof require&&require;if(!e&&r)return r(n,!0);if(f)return f(n,!0);throw(e=new Error(\"Cannot find module '\"+n+\"'\")).code=\"MODULE_NOT_FOUND\",e}r=i[n]={exports:{}},o[n][0].call(r.exports,function(e){return u(o[n][1][e]||e)},r,r.exports,t,o,i,a)}return i[n].exports}for(var f=\"function\"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,n,r){\"use strict\";function t(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,\"value\"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function o(){if(!(this instanceof o))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(r,\"__esModule\",{value:!0}),function(e,n,r){n&&t(e.prototype,n),r&&t(e,r)}(o,[{key:\"$onInit\",value:function(){this.isLoggedIn=this.parentCtrl.isLoggedIn,this.isLoggedIn&&angular.element(document).ready(function(){var e=angular.element(document.querySelector('div[data-main-menu-item=\"new_user\"]'));e&&0!==e.length&&e.css(\"display\",\"none\")})}}]);r.PrmTopNavBarLinksAfterConfig={name:\"prmTopNavBarLinksAfter\",config:{bindings:{parentCtrl:\"<\"},controller:o}}},{}],2:[function(e,n,r){\"use strict\";e=e(\"./hide-new-user-if-loggedin/prmTopNavBarLinksAfter.component\");angular.module(\"viewCustom\").component(e.PrmTopNavBarLinksAfterConfig.name,e.PrmTopNavBarLinksAfterConfig.config)},{\"./hide-new-user-if-loggedin/prmTopNavBarLinksAfter.component\":1}]},{},[2]);"]}