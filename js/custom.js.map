{"version":3,"sources":["node_modules/browser-pack/_prelude.js","primo-explore/custom/45KBDK_KGL-KGL/js/brokenLinkFeedback/prmReportProblemAfter.js","primo-explore/custom/45KBDK_KGL-KGL/js/chat-box/scriptIds.constant.js","primo-explore/custom/45KBDK_KGL-KGL/js/edit-profile/kbEditProfile.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/edit-profile/prmPersonalInfoAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/footerAndHelp/kbFooter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/footerAndHelp/kbHelp.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/footerAndHelp/prmExploreFooterAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/help-page/kbHelpPage.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/help-page/kbHelpPageHeader.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/home/kbHome.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/language-and-pincode/kbEditPincode.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/language-and-pincode/kbLanguage.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/language-and-pincode/kbMoveBecomeUser.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/language-and-pincode/prmUserAreaExpandableAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/main.js","primo-explore/custom/45KBDK_KGL-KGL/js/move-request-another-bin-and-categorize-pickup-location/kbPickupLocations.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/move-request-another-bin-and-categorize-pickup-location/prmServiceButtonAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/navigation-header/kbNavigationHeader.js","primo-explore/custom/45KBDK_KGL-KGL/js/navigation-header/prmTopBarBefore.js","primo-explore/custom/45KBDK_KGL-KGL/js/open-items-location-filter/prmLocationItemsAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/pickup-numbers/pickUpNumbers.service.js","primo-explore/custom/45KBDK_KGL-KGL/js/pickup-numbers/prmRequestsAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/resource-recommender/prmResourceRecommenderAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/services/getTranslations.service.js","primo-explore/custom/45KBDK_KGL-KGL/js/special-view/prmPreFiltersAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/node_modules/kb-primo-ve-announcement/dist/index.js","primo-explore/custom/45KBDK_KGL-KGL/node_modules/kb-primo-ve-hide-new-user-if-loggedin/dist/index.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","angular","element","document","querySelectorAll","addEventListener","closeReportBrokenLink","header","append","PrmReportProblemAfterConfig","name","config","controller","scriptIds","en","da","querySelector","this","$element","KbEditProfileController","$inject","KbEditProfileConfig","templateUrl","viewName","PrmPersonalInfoAfterConfig","bindings","parentCtrl","template","KbFooterConfig","getHelpTextFromAPI","_this","location","search","vid","_getTranslations","lang","then","response","help","createHelpJson","data","catch","err","console","error","translationObject","subheaders","Object","keys","filter","v","startsWith","subheadersLength","options","mainHeader","push","subheader","submenu","iconset","icondefinition","view","getTranslationsService","bodyContent","helpMenu","getElementById","hasClass","classList","add","$mdDialog","show","contentElement","parent","getElementsByName","hasBackdrop","multiple","clickOutsideToClose","fullscreen","focusOnOpen","cancel","remove","id","KbHelpController","$http","$location","helpButtonTemplateUrl","helpMenuTemplateUrl","helpMenuHeaderTemplateUrl","helpMenuBodyTemplateUrl","helpSubMenuBodyTemplateUrl","KbHelpConfig","PrmExploreFooterAfterConfig","KbHelpPageController","window","pageYOffset","style","visibility","index","indexOf","onclick","OnFixedButtonsHolderClick","showScrollButton","scrollTo","top","left","behavior","KbHelpPageConfig","KbHelpPageHeaderController","KbHelpPageHeaderConfig","replace","KbHomeController","KbHomeConfig","KbEditPincodeController","count","setInterval","userSignedId","clearInterval","undefined","userButtons","editPincodeItem","menuItem","parentNode","insertBefore","firstChild","nextSibling","KbEditPincodeConfig","newLang","getElementsByTagName","$window","href","absUrl","KbLanguageController","KbLanguageConfig","$intervalId","$interval","findBecomeUserDiv","intervalId","becomeUserDiv","moveBecomeUserDiv","KbMoveBecomeUserController","KbMoveBecomeUserConfig","PrmUserAreaExpandableAfterConfig","url","query","_kbHome","_prmPreFiltersAfter","_prmPersonalInfoAfter","_kbEditProfile","_kbHelpPage","_kbHelpPageHeader","_prmExploreFooterAfter","_kbFooter","_kbHelp","_prmTopBarBefore","_kbNavigationHeader","_prmUserAreaExpandableAfter","_kbLanguage","_kbEditPincode","_kbMoveBecomeUser","_scriptIds","_prmLocationItemsAfter","_prmServiceButtonAfter","_pickUpNumbers","_prmRequestsAfter","_prmReportProblemAfter","_prmResourceRecommenderAfter","constant","substring","pathname","log","service","GetTranslationsService","component","PrmPreFiltersAfterConfig","PrmTopBarBeforeConfig","KbNavigationHeaderConfig","PrmLocationItemsAfterConfig","PrmServiceButtonAfterConfig","PickUpNumbersService","PrmRequestsAfterConfig","PrmResourceRecommenderAfterConfig","KbPickupLocationsController","intervalIdFindButton","timesRunIntervalIdFindButton","findRequestButtonAndAttachJavascriptToIt","forEach","mdOption","display","labels","label","fontWeight","openOrCloseALocationGroup","event","stopImmediatePropagation","children","currentTarget","j","target","timesRunIntervalIdFindPickupLocationSelect","intervalIdFindPickupLocationSelect","pickupLocationSelectInput","addCssAndJavascriptEventsToLabelsAndOptions","prmServiceButtons","startSearchingForPickupLocationField","KbPickupLocationsConfig","AlmaRequestOther","textContent","container","tagName","addClass","css","requestButtons","getElementsByClassName","backButtons","_i","PrmServiceButtonAfterController","getMenuPointsFromPI","parentElement","$event","menu","createMenuJson","_this2","items","links","KbNavigationHeaderController","filterBtn1","filterBtn2","filterDiv","triggerHandler","activateFilter","PrmLocationItemsAfterController","_pickUpNumbersForIds","_runningPromise","_ongoingInsertions","ctrl","$scope","$watch","selector","newVal","oldVal","retrieveAndInsertPickUpNumbers","requestsService","requestsDisplay","targetContainer","requests","_insert","baseUrl","$$absUrl","includes","pickUpNumber","innerHTML","newElement","getPickupLabel","_this3","addPickupnumbersToOverview","overview_requests","requestId","_this4","Promise","resolve","reject","targetElements","requestObjects","_composeRequestObjects","inserts","request","key","_insertForRequest","insertPickupnumbersToOverview","map","expandedDisplay","isAlert","_this5","insertPickUpNumber","_retrievePickUpNumber","number","get","getServiceBaseUrl","pickUpNumbersService","waitForIdsAndInsertPickUpNumbers","PrmRequestsAfterController","setTimeout","addCloseButtonAndOpenRecommenderIfNeeded","elem","prepend","sessionStorage","hideRecommender","removeClass","PrmResourceRecommenderAfterController","language","changeSearchBarPlaceholder","placeHolderText","attr","PrmPreFiltersAfterController","s","l","defineProperty","value","enumerable","configurable","writable","TypeError","$translate","$mdToast","$rootScope","$cookies","_dismissed","$on","AnnouncementService","_toastPromise","hide","hideDelay","position","close","put","controllerAs","_dismiss","prototype","2","announcementService","PrmTopbarAfterConfig","primoExploreCtrl","3","./announcement/announcement.service","./announcement/prmTopbarAfter.component","isLoggedIn","ready","PrmTopNavBarLinksAfterConfig","./hide-new-user-if-loggedin/prmTopNavBarLinksAfter.component"],"mappings":"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","file":"custom.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","class PrmReportProblemAfterController {\n    $onInit() {\n        let openReportBrokenLink = angular.element(document.querySelectorAll('prm-report-problem .report-problem-btn'))[0];\n        openReportBrokenLink.addEventListener('click', function () {\n            let closeReportBrokenLink = angular.element('<prm-icon svg-icon-set=\"navigation\" icon-definition=\"ic_close_24px\" id=\"closeReportBrokenLink\" onclick=\"document.querySelectorAll(\\'prm-report-problem .report-problem-btn\\')[0].click();\" id=\"closeReportBrokenLink\"><svg width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\" id=\"ic_close_24px_cache28\" y=\"240\" xmlns=\"http://www.w3.org/2000/svg\" fit=\"\" preserveAspectRatio=\"xMidYMid meet\" focusable=\"false\"><path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"></path></svg></prm-icon>');\n            let header = angular.element(document.querySelectorAll('prm-report-problem .report-header'));\n            if(header && closeReportBrokenLink){\n                header.append(closeReportBrokenLink);\n            }\n        });\n    }\n}\n\nexport let PrmReportProblemAfterConfig = {\n    name: 'prmReportProblemAfter',\n    config: {\n        controller: PrmReportProblemAfterController,\n    }\n};","export const scriptIds = {\n    'en': 'b19d8ae41c784590fd84ba51114c29d2',\n    'da': '668df01b6f2cd836279a993a8fc944ec'\n};","class KbEditProfileController {\n    constructor($element) {\n        this.$element = $element;\n    };\n\n    $postLink() {\n        // Move edit-profile button to the desired position\n        let container = angular.element(document.querySelector('md-card#personalDetails .md-toolbar-tools'));\n        container.append(this.$element);\n    };\n}\n\nKbEditProfileController.$inject = ['$element'];\nexport let KbEditProfileConfig = {\n    name: 'kbEditProfile',\n    config: {\n        controller: KbEditProfileController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/edit-profile/edit-profile.html';\n        }],\n    }\n};","export let PrmPersonalInfoAfterConfig = {\n    name: 'prmPersonalInfoAfter',\n    config: {\n        bindings: {parentCtrl: '<'},\n        template: `<kb-edit-profile></kb-edit-profile>`,\n    }\n};","export let KbFooterConfig = {\n    name: 'kbFooter',\n    config: {\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/footer/footer.html';\n        }],\n    }\n};","\nclass KbHelpController {\n\n    constructor($http, $location, $mdDialog, viewName, getTranslationsService) {\n        this.getTranslationsService = getTranslationsService;\n        this.$http = $http;\n        this.$mdDialog = $mdDialog;\n        this.viewName = viewName;\n        this.location = $location;\n        this.lang = \"da\";\n        this.bodyContent = 'main-menu';\n        this.helpButtonTemplateUrl = 'custom/' + viewName + '/html/help-button/help-button.html';\n        this.helpMenuTemplateUrl = 'custom/' + viewName + '/html/help-button/help-menu.html';\n        this.helpMenuHeaderTemplateUrl = 'custom/' + viewName + '/html/help-button/help-menu-header.html';\n        this.helpMenuBodyTemplateUrl = 'custom/' + viewName + '/html/help-button/help-menu-body.html';\n        this.helpSubMenuBodyTemplateUrl = 'custom/' + viewName + '/html/help-button/help-sub-menu-body.html';\n        this.help = {};\n    };\n\n        $onInit() {\n            this.getHelpTextFromAPI();\n        }\n\n        getHelpTextFromAPI(){\n            let viewName = this.location.search().vid;\n            this._getTranslations(this.lang, viewName)\n                .then(response => {\n                    this.help = this.createHelpJson(response.data);\n                })\n                .catch(err => {\n                    console.error(err);\n                    return err;\n                });\n        }\n\n        createHelpJson(translationObject) {\n            let help = {};\n            let subheaders = Object.keys(translationObject).filter(v => v.startsWith('fulldisplay.help.subheader'));\n            help.options = [];\n            help.mainHeader = translationObject[\"fulldisplay.help.mainheader\"];\n            let subheadersLength =  subheaders ? subheaders.length : 0;\n\n            for (let i = 0; i < subheadersLength; i++) {\n                if (translationObject[`fulldisplay.help.subheader${i + 1}`] === 'line'){\n                    help.options.push({\n                        subheader: 'line',\n                    });\n                }else {\n                    help.options.push({\n                        subheader: translationObject[`fulldisplay.help.subheader${i + 1}`],\n                        submenu: translationObject[`fulldisplay.help.sub${i + 1}`],\n                        iconset: translationObject[`fulldisplay.help.iconset${i + 1}`],\n                        icondefinition: translationObject[`fulldisplay.help.icondefinition${i + 1}`],\n                    });\n                }\n            }\n            return help;\n        }\n\n\n        _getTranslations(lang, view){\n            return this.getTranslationsService._getTranslations(lang, view);\n        }\n\n\n\n    openHelpMenu() {\n        this.bodyContent = 'main-menu';\n        let helpMenu = document.getElementById('helpMenu');\n        // Remove and add md-dialog-container to the helpMenu so it doesn't interfere with Primo's\n        if (!angular.element(document.querySelectorAll('#helpMenu')).hasClass('md-dialog-container')) {\n            helpMenu.classList.add('md-dialog-container');\n            this.$mdDialog.show({\n                contentElement: '#helpMenu',\n                parent: angular.element(document.getElementsByName('kb-help')[0]),\n                // Not using standard backdrop because it is interfering with Primo's\n                hasBackdrop: false,\n                multiple: true,\n                clickOutsideToClose: false,\n                fullscreen: true,\n                focusOnOpen: true,\n            });\n        }\n    };\n\n        hideHelpMenu(){\n            this.$mdDialog.cancel();\n            let helpMenu = document.getElementById('helpMenu');\n            helpMenu.classList.remove('md-dialog-container');\n        };\n\n        changeBodyContent(id){\n            this.bodyContent = id;\n        };\n\n}\n\nKbHelpController.$inject = ['$http', '$location', '$mdDialog', 'viewName', 'getTranslationsService'];\n\nexport let KbHelpConfig = {\n    name: 'kbHelp',\n    config: {\n        controller: KbHelpController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/help-button/help.html';\n        }],\n     },\n};","export let PrmExploreFooterAfterConfig = {\n    name: 'prmExploreFooterAfter',\n    config: {\n        bindings: {parentCtrl: '<'},\n        template: `<kb-footer></kb-footer>\n                   <kb-help parent-ctrl='$ctrl.parentCtrl'></kb-help>`,\n    }\n};","class KbHelpPageController {\n\n\n\n    constructor() {\n    };\n\n    static OnFixedButtonsHolderClick(){\n        window.scrollTo({\n            top: 0,\n            left: 0,\n            behavior: 'smooth'\n        });\n    };\n\n    showScrollButton(){\n        if(window.pageYOffset !== 0){\n            document.getElementById('fixedButtonsHolder').style.visibility = \"visible\";\n        } else{\n            document.getElementById('fixedButtonsHolder').style.visibility = \"hidden\";\n        }\n    }\n\n    $postLink() {\n        let url = window.location.search;\n        let index = url.indexOf('SPEC');\n        this.view = index > 0 ? 'special' : 'general';\n\n        document.getElementById('fixedButtonsHolder').onclick = KbHelpPageController.OnFixedButtonsHolderClick;\n        window.addEventListener(\"scroll\", this.showScrollButton);\n    };\n\n\n}\n\nexport let KbHelpPageConfig = {\n    name: 'kbHelpPage',\n    config: {\n        controller: KbHelpPageController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/help/kb-help-page.html';\n        }],\n    }\n};","class KbHelpPageHeaderController {\n\n    constructor() {\n    };\n\n    $postLink() {\n        let url = window.location.search;\n        let index = url.indexOf('SPEC');\n        this.view = index > 0 ? 'special' : 'general';\n    };\n}\n\nexport let KbHelpPageHeaderConfig = {\n    name: 'kbHelpPageHeader',\n    config: {\n        controller: KbHelpPageHeaderController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/help/kb-help-page-header.html';\n        }],\n    }\n};","class KbHomeController {\n\n    constructor($location) {\n        this.location = $location;\n    };\n\n    $postLink() {\n        this.vid = this.location.search().vid.replace(\":\", \"-\");\n        let index = this.vid.indexOf('SPEC');\n        this.view = index > 0 ? 'special' : 'general';\n    };\n}\n\nKbHomeController.$inject = ['$location'];\n\n\nexport let KbHomeConfig = {\n    name: 'kbHome',\n    config: {\n        controller: KbHomeController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/homepage/kb-homepage.html';\n        }],\n    }\n};","// https://sbprojects.statsbiblioteket.dk/jira/browse/BSV-239\nclass KbEditPincodeController {\n    constructor($location) {\n        this.location = $location;\n    };\n\n    $onInit() {\n        KbEditPincodeController.count = 0;\n        if (!KbEditPincodeController.id) {\n            KbEditPincodeController.id = setInterval(this.userSignedId, 500);\n        }\n\n    }\n\n    userSignedId() {\n        KbEditPincodeController.count += 1;\n        if (KbEditPincodeController.count >= 5){\n            clearInterval(KbEditPincodeController.id);\n            KbEditPincodeController.id = undefined;\n        }\n        let signInBtn = document.getElementById(\"signInBtn\");\n        if (signInBtn == null) {\n            clearInterval(KbEditPincodeController.id);\n            KbEditPincodeController.id = undefined;\n\n\n            let userButtons = angular.element(document.querySelectorAll('prm-user-area-expandable button.user-button'));\n            let editPincodeItem = angular.element(document.querySelector('kb-edit-pincode'));\n            for (let i = 0; i < userButtons.length; i++) {\n                userButtons[i].addEventListener('click', function () {\n                    let menuItem = angular.element(document.querySelector('md-menu-item.my-library-card-ctm'));\n                    menuItem[0].parentNode.insertBefore(editPincodeItem[0].firstChild, menuItem[0].nextSibling);\n                });\n            }\n        }\n    }\n}\n\nKbEditPincodeController.$inject = ['$location'];\n\nexport let KbEditPincodeConfig=  {\n    name: 'kbEditPincode',\n    config: {\n        bindings: {\n            parentCtrl: '<',\n        },\n        controller: KbEditPincodeController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/language-and-pincode/edit-pincode.html';\n        }],\n    }\n};","class KbLanguageController {\n\n    constructor($window, $location) {\n        this.$window = $window;\n        this.$location = $location;\n    };\n\n    $onInit() {\n        this.lang = this.parentCtrl.lang;\n    }\n\n    changeLanguage() {\n        let newLang = this.lang === 'da'? 'en' : 'da';\n        this.$location.search('lang', newLang);\n        document.getElementsByTagName(\"html\")[0].lang = newLang;\n        this.$window.location.href = this.$location.absUrl();\n    }\n\n}\n\nKbLanguageController.$inject = ['$window', '$location'];\n\nexport let KbLanguageConfig=  {\n    name: 'kbLanguage',\n    config: {\n        bindings: {\n            parentCtrl: '<',\n        },\n        controller: KbLanguageController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/language-and-pincode/language.html';\n        }],\n    }\n};","class KbMoveBecomeUserController {\n\n    constructor($interval, $element) {\n        this.$interval = $interval;\n        this.$element = $element;\n    };\n\n    $onInit() {\n        let _this = this;\n        this.$intervalId = this.$interval(function(){\n            _this.findBecomeUserDiv(_this.$intervalId);\n        }, 500, 10);\n    }\n\n    findBecomeUserDiv(intervalId){\n        const becomeUserDiv = angular.element(document.querySelectorAll('div[data-main-menu-item=\"new_user\"]'));\n        if (becomeUserDiv.length){\n            this.$interval.cancel(intervalId);\n            this.moveBecomeUserDiv(becomeUserDiv);\n        }\n    }\n\n    moveBecomeUserDiv(becomeUserDiv) {\n        let container = this.$element.parent();\n        container.append(becomeUserDiv);\n    }\n}\n\nKbMoveBecomeUserController.$inject = ['$interval', '$element'];\n\nexport let KbMoveBecomeUserConfig=  {\n    name: 'kbMoveBecomeUser',\n    config: {\n        controller: KbMoveBecomeUserController,\n    }\n};","export let PrmUserAreaExpandableAfterConfig=  {\n    name: 'prmUserAreaExpandableAfter',\n    config: {\n        bindings: {\n            parentCtrl: '<'\n        },\n        template: `<kb-language parent-ctrl='$ctrl.parentCtrl'></kb-language><kb-edit-pincode></kb-edit-pincode><kb-move-become-user></kb-move-become-user>`,\n    }\n};","// General services\nimport {GetTranslationsService } from \"./services/getTranslations.service\";\n\n// KB special view home for university thesis\nimport {KbHomeConfig} from './home/kbHome.component';\n\n// Special view\nimport {PrmPreFiltersAfterConfig} from './special-view/prmPreFiltersAfter.component';\n\n// Edit profile\nimport {PrmPersonalInfoAfterConfig} from './edit-profile/prmPersonalInfoAfter.component';\nimport {KbEditProfileConfig} from './edit-profile/kbEditProfile.component';\n\n// Help page\nimport {KbHelpPageConfig} from './help-page/kbHelpPage.component';\nimport {KbHelpPageHeaderConfig} from './help-page/kbHelpPageHeader.component';\n\n// Footer\nimport {PrmExploreFooterAfterConfig} from './footerAndHelp/prmExploreFooterAfter.component';\nimport {KbFooterConfig} from './footerAndHelp/kbFooter.component';\n\nimport {KbHelpConfig} from './footerAndHelp/kbHelp.component';\n\n// Navigation header\nimport {PrmTopBarBeforeConfig} from './navigation-header/prmTopBarBefore';\nimport {KbNavigationHeaderConfig} from './navigation-header/kbNavigationHeader';\n\n// Language switcher\nimport {PrmUserAreaExpandableAfterConfig} from './language-and-pincode/prmUserAreaExpandableAfter.component';\nimport {KbLanguageConfig} from './language-and-pincode/kbLanguage.component';\nimport {KbEditPincodeConfig} from './language-and-pincode/kbEditPincode.component';\nimport {KbMoveBecomeUserConfig} from './language-and-pincode/kbMoveBecomeUser.component';\n\n\n// ChatBox scriptId\nimport {scriptIds} from \"./chat-box/scriptIds.constant\";\n\n// Open items location filter\nimport {PrmLocationItemsAfterConfig} from \"./open-items-location-filter/prmLocationItemsAfter.component\";\n\n// Move request-another-volume\nimport {PrmServiceButtonAfterConfig} from \"./move-request-another-bin-and-categorize-pickup-location/prmServiceButtonAfter.component\";\nimport {KbPickupLocationsConfig} from \"./move-request-another-bin-and-categorize-pickup-location/kbPickupLocations.component\";\n\n// Add pickup numbers\nimport {PickUpNumbersService } from \"./pickup-numbers/pickUpNumbers.service\";\nimport {PrmRequestsAfterConfig} from \"./pickup-numbers/prmRequestsAfter.component\";\n\n// Close broken link feedback\nimport {PrmReportProblemAfterConfig} from \"./brokenLinkFeedback/prmReportProblemAfter\";\n\n// Resource recommender\nimport {PrmResourceRecommenderAfterConfig} from \"./resource-recommender/prmResourceRecommenderAfter.component\";\n\nangular.module('viewCustom', ['angularLoad', 'ngMaterial'])\n    .constant('viewName', (function () {\n            let url = window.location.search.substring(1);\n            let query = url.substring(url.indexOf('vid') + 4);\n            // in 'Alma Viewer page'\n            if(!url){\n                url = window.location.pathname;\n                query = url.substring(url.indexOf('/delivery/')+10);\n                query = query.substring(0, query.indexOf('/'));\n            }\n            // If there are other parameters after vid, then remove them\n            let vid = query.substring(0, query.indexOf('&')) ? query.substring(0, query.indexOf('&')) : query;\n        vid = vid.replace(\"%3A\", \"-\");\n        console.log('vid:',vid);\n        return vid.replace(\":\", \"-\");\n    })()\n    )\n\n    // ChatBox scriptId\n    .constant('scriptIds' , scriptIds)\n\n    // General services\n    .service('getTranslationsService', GetTranslationsService)\n\n    // Help page\n    .component(KbHelpPageHeaderConfig.name, KbHelpPageHeaderConfig.config)\n    .component(KbHelpPageConfig.name, KbHelpPageConfig.config)\n\n    // KB special view home for university thesis\n    .component(KbHomeConfig.name, KbHomeConfig.config)\n\n    // Special view\n    .component(PrmPreFiltersAfterConfig.name, PrmPreFiltersAfterConfig.config)\n\n    // Edit profile\n    .component(PrmPersonalInfoAfterConfig.name, PrmPersonalInfoAfterConfig.config)\n    .component(KbEditProfileConfig.name, KbEditProfileConfig.config)\n\n    // Footer and help\n    .component(PrmExploreFooterAfterConfig.name, PrmExploreFooterAfterConfig.config)\n    .component(KbFooterConfig.name, KbFooterConfig.config)\n\n   .component(KbHelpConfig.name, KbHelpConfig.config)\n\n    // Navigation header\n    .component(PrmTopBarBeforeConfig.name, PrmTopBarBeforeConfig.config)\n    .component(KbNavigationHeaderConfig.name, KbNavigationHeaderConfig.config)\n\n    // Open items location filter\n    .component(PrmLocationItemsAfterConfig.name, PrmLocationItemsAfterConfig.config)\n\n    // Move request-another-volume\n    .component(PrmServiceButtonAfterConfig.name, PrmServiceButtonAfterConfig.config)\n    // .component(KbPickupLocationsConfig.name, KbPickupLocationsConfig.config)\n\n    // Language switcher and pincode and become user\n    .component(PrmUserAreaExpandableAfterConfig.name, PrmUserAreaExpandableAfterConfig.config)\n    .component(KbLanguageConfig.name, KbLanguageConfig.config)\n    .component(KbEditPincodeConfig.name, KbEditPincodeConfig.config)\n    .component(KbMoveBecomeUserConfig.name, KbMoveBecomeUserConfig.config)\n\n    // Add pickup numbers\n    .service('pickUpNumbersService', PickUpNumbersService)\n    .component(PrmRequestsAfterConfig.name, PrmRequestsAfterConfig.config)\n\n    // Close report broken link feedback\n    .component(PrmReportProblemAfterConfig.name, PrmReportProblemAfterConfig.config)\n\n    // Resource recommender\n    .component(PrmResourceRecommenderAfterConfig.name, PrmResourceRecommenderAfterConfig.config)\n\n// Get more info at https://github.com/Det-Kongelige-Bibliotek/KB-Primo-VE-Announcement\nrequire('kb-primo-ve-announcement');\n\n// Get more info at https://github.com/Det-Kongelige-Bibliotek/KB-Primo-VE-Hide-New-User-If-Loggedin.git\nrequire('kb-primo-ve-hide-new-user-if-loggedin');\n\n// Get more info at https://github.com/Det-Kongelige-Bibliotek/KB-Primo-VE-libChat.git\n// require('kb-primo-ve-libchat');\n","// Related to following Jira Issue:\n// https://sbprojects.statsbiblioteket.dk/jira/browse/BSV-213\nclass KbPickupLocationsController {\n    constructor(getTranslationsService) {\n        this.getTranslationsService = getTranslationsService;\n    };\n\n    // Test here:\n    // /discovery/fulldisplay?docid=alma99122559747705763&context=L&vid=45KBDK_KGL:KGL&lang=da&search_scope=MyInst_and_CI&adaptor=Local%20Search%20Engine&tab=Everything&query=any,contains,kvinde&offset=0\n    // Login\n    // Click on 'Bestil'\n    // Afhentningssted\n    $onInit() {\n        // prmServiceButtonAfter is called two times\n        if (KbPickupLocationsController.intervalIdFindButton === undefined) {\n            KbPickupLocationsController.timesRunIntervalIdFindButton = 0;\n            // We hook to prmServiceButtonAfter, and the button is not there in the beginning,\n            // so we need to wait a bit so the button is there.\n            KbPickupLocationsController.intervalIdFindButton = setInterval(KbPickupLocationsController.findRequestButtonAndAttachJavascriptToIt, 500);\n        }\n    }\n\n    static addCssAndJavascriptEventsToLabelsAndOptions() {\n        const mdOptions = document.querySelectorAll('md-select-menu md-optgroup md-option');\n        mdOptions.forEach(mdOption => {\n            mdOption.style.display = \"none\";\n            // It is a fix for the options which are further down the menu\n            // that is, for some weired reasons, menu won't get closed after choosing an option.\n            mdOption.addEventListener(\"click\", function () {\n                    if (document.querySelector('body > .md-select-menu-container')) {\n                        document.querySelector('body > .md-select-menu-container').style.display = 'none';\n                    }\n                }\n            );\n        });\n\n        const labels = document.querySelectorAll('md-select-menu md-optgroup label');\n        labels.forEach((label, index) => {\n            label.style.fontWeight = 'bold';\n            label.classList.add('plus');\n            label.classList.remove('minus');\n\n            label.addEventListener(\"click\", function () {\n                KbPickupLocationsController.openOrCloseALocationGroup(event, labels, index);\n            });\n        });\n    }\n\n    static openOrCloseALocationGroup(event, labels, i) {\n        event.stopImmediatePropagation();\n        let children = event.currentTarget.parentNode.children;\n        for (let j = 0; j < children.length; j++) {\n            if (children[j] !== event.target) {\n                if (children[j].style.display === \"none\") {\n                    children[j].style.display = \"flex\";\n                    labels[i].classList.add('minus');\n                    labels[i].classList.remove('plus');\n                } else {\n                    children[j].style.display = \"none\";\n                    labels[i].classList.add('plus');\n                    labels[i].classList.remove('minus');\n                }\n            }\n        }\n    }\n\n    static startSearchingForPickupLocationField() {\n        KbPickupLocationsController.timesRunIntervalIdFindPickupLocationSelect = 0;\n        KbPickupLocationsController.intervalIdFindPickupLocationSelect = setInterval(function () {\n            KbPickupLocationsController.timesRunIntervalIdFindPickupLocationSelect += 1;\n            const pickupLocationSelectInput = angular.element(document.querySelectorAll('#form_field_pickupLocation md-select'));\n            // When 'pickupLocation field' is found then attach the changes to its click event and stop the interval.\n            if (pickupLocationSelectInput.length) {\n                pickupLocationSelectInput[0].addEventListener(\"click\", KbPickupLocationsController.addCssAndJavascriptEventsToLabelsAndOptions);\n                clearInterval(KbPickupLocationsController.intervalIdFindPickupLocationSelect);\n            } else {\n                if (KbPickupLocationsController.timesRunIntervalIdFindPickupLocationSelect === 10) {\n                    clearInterval(KbPickupLocationsController.intervalIdFindPickupLocationSelect);\n                }\n            }\n\n        }, 500);\n    }\n\n    static findRequestButtonAndAttachJavascriptToIt() {\n        KbPickupLocationsController.timesRunIntervalIdFindButton += 1;\n        const prmServiceButtons = angular.element(document.querySelectorAll('prm-service-button button'));\n        if (KbPickupLocationsController.timesRunIntervalIdFindButton === 10 || prmServiceButtons.length) {\n            clearInterval(KbPickupLocationsController.intervalIdFindButton);\n        }\n        for (let i = 0; i < prmServiceButtons.length; i++) {\n            prmServiceButtons[i].addEventListener(\"click\", KbPickupLocationsController.startSearchingForPickupLocationField);\n        }\n    }\n}\n\nKbPickupLocationsController.$inject = ['getTranslationsService'];\n\nexport let KbPickupLocationsConfig = {\n    name: 'kbPickupLocations',\n    config: {\n        controller: KbPickupLocationsController,\n        bindings: {\n            parentCtrl: '<',\n        },\n    }\n};","class PrmServiceButtonAfterController {\n    constructor($element, $interval) {\n        this.$element = $element;\n        this.$interval = $interval;\n    };\n    $postLink() {\n        let _this = this;\n        this.intervalId = this.$interval(function(){\n            let AlmaRequestOther = angular.element(document.querySelector(\"span[translate='AlmaRequestOther']\"));\n            if(AlmaRequestOther.length){\n                _this.$interval.cancel(_this.intervalId);\n                AlmaRequestOther = AlmaRequestOther.parent().parent();\n                if(AlmaRequestOther[0].textContent === angular.element(_this.$element.parent())[0].textContent){\n                    let container = AlmaRequestOther.parent();\n                    while ((!container.hasClass(\"section-body\"))&&(container[0].tagName !== \"BODY\")){\n                        container = container.parent();\n                    }\n                    container.append(AlmaRequestOther.parent());\n                    AlmaRequestOther.parent().addClass('orderAtTheBottom');\n                    AlmaRequestOther.parent().css('float','right');\n                    let requestButtons = angular.element(document.querySelectorAll(\"span[translate='AlmaItemRequest']\"));\n                    for (let i = 0; i < requestButtons.length; i++) {\n                        requestButtons[i].addEventListener(\"click\", function(){\n                            if(document.getElementsByClassName(\"orderAtTheBottom\") && document.getElementsByClassName(\"orderAtTheBottom\").length){\n                                AlmaRequestOther.css('display', 'none');\n                            }\n\n                        });\n                    }\n                    let backButtons = angular.element(document.querySelectorAll(\"prm-opac-back-button button\"));\n                    for (let i = 0; i < backButtons.length; i++) {\n                        backButtons[i].addEventListener(\"click\", function(){\n                            if(document.getElementsByClassName(\"orderAtTheBottom\") && document.getElementsByClassName(\"orderAtTheBottom\").length){\n                                document.getElementsByClassName(\"orderAtTheBottom\")[0].remove();\n                                AlmaRequestOther.css('display', 'inline-block');\n                            }\n\n                        });\n                    }\n                }\n            }\n        }, 500, 5);\n    };\n}\n\nPrmServiceButtonAfterController.$inject = ['$element', '$interval'];\n\nexport let PrmServiceButtonAfterConfig = {\n    name: 'prmServiceButtonAfter',\n    config: {\n        bindings: {\n            parentCtrl: '<'\n        },\n        controller: PrmServiceButtonAfterController,\n        template: `<kb-pickup-locations parent-ctrl='$ctrl.parentCtrl'></kb-pickup-locations>`,\n    },\n}","class KbNavigationHeaderController {\n    constructor($element, $location, getTranslationsService) {\n        this.$element = $element;\n        this.getTranslationsService = getTranslationsService;\n        this.location = $location;\n        this.viewName = this.location.search().vid;\n    };\n\n    $postLink() {\n        this.getMenuPointsFromPI();\n        // Find containers parent element\n        let parentElement = this.$element.parent().parent().parent().parent();\n        // Move navigation header to the top\n        let container = angular.element(parentElement.children()[0]);\n        container.append(this.$element);\n    };\n\n    showBackToMenu($event){\n        document.getElementById('backToItems').style.display = 'block';\n    }\n\n    hideBackToMenu($event){\n        document.getElementById('backToItems').style.display = 'none';\n    }\n\n    getMenuPointsFromPI(){\n        this._getTranslations(this.lang, this.viewName)\n            .then(response => {\n                this.menu = this.createMenuJson(response.data);\n            })\n            .catch(err => {\n                console.error(err);\n                return err;\n            });\n    }\n\n    _getTranslations(lang, view){\n        return this.getTranslationsService._getTranslations(lang, view);\n    }\n\n    createMenuJson(translationObject) {\n        this.view = this.viewName.indexOf('SPEC') > 0 ? '.special' : '.general';\n        let menu = {};\n        menu.items = Object.keys(translationObject).filter(v => v.startsWith('fulldisplay.topnavigation'+ this.view +'.list.item'));\n        menu.links = Object.keys(translationObject).filter(v => v.startsWith('fulldisplay.topnavigation'+ this.view +'.list.link'));\n        return menu;\n    }\n}\n\nKbNavigationHeaderController.$inject = ['$element', '$location', 'getTranslationsService'];\n\nexport let KbNavigationHeaderConfig = {\n    name: 'kbNavigationHeader',\n    config: {\n        bindings: {\n            parentCtrl: '<'\n        },\n        controller: KbNavigationHeaderController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/navigation-header/navigation-header.html';\n        }],\n    },\n}","export let PrmTopBarBeforeConfig = {\n    name: 'prmTopBarBefore',\n    config: {\n        bindings: {\n            parentCtrl: '<'\n        },\n        template:`<kb-navigation-header parent-ctrl='$ctrl.parentCtrl'></kb-navigation-header>`,\n    }\n};","class PrmLocationItemsAfterController {\n    constructor($interval) {\n        this.$interval = $interval;\n    }\n\n    activateFilter(intervalId) {\n        // Two different filter buttons in different pages. Hopefully there is not more\n        let filterBtn1 = angular.element(document.querySelectorAll(\"prm-locations > div > button.md-icon-button.md-ink-ripple\"));\n        let filterBtn2 = angular.element(document.querySelectorAll(\"prm-location-items  div  button.md-icon-button.md-ink-ripple\"));\n        // If the filter div exists it means it is already open\n        let filterDiv = angular.element(document.querySelectorAll(\"prm-locations-filter md-input-container\"));\n\n        if ((filterBtn1.length || filterBtn2.length) && !filterDiv.length) {\n            this.$interval.cancel(intervalId);\n            if (filterBtn1.length){\n                filterBtn1.triggerHandler('click');\n            }\n            if (filterBtn2.length){\n                filterBtn2.triggerHandler('click');\n            }\n        }else{\n            if (filterDiv.length){\n                this.$interval.cancel(intervalId);\n            }\n        }\n    }\n\n    $onInit() {\n        let _this = this;\n        this.$intervalId = this.$interval(function(){\n            _this.activateFilter(_this.$intervalId);\n        }, 500, 10);\n    }\n}\n\nPrmLocationItemsAfterController.$inject = ['$interval'];\n\nexport let PrmLocationItemsAfterConfig = {\n    name: 'prmLocationItemsAfter',\n    config: {\n        bindings: {\n            parentCtrl: '<'\n        },\n        controller: PrmLocationItemsAfterController\n    }\n};","/**\n * Service to insert the pick up numbers for the requested items.\n */\nexport class PickUpNumbersService {\n    constructor($http, $location) {\n        this.$http = $http;\n        this.location = $location;\n        this._pickUpNumbersForIds = {};\n        this._runningPromise;\n        this._ongoingInsertions = 0;\n    }\n\n    /**\n     * Binds a watcher to the given controller.\n     * The watcher watches for the elements\n     * containing the request IDs, and when the\n     * elements become available, inserts the pickup\n     * numbers if they exist.*/\n\n    waitForIdsAndInsertPickUpNumbers(ctrl) {\n        ctrl.$scope.$watch(() => ctrl.selector(ctrl.parentElement).length,\n            (newVal, oldVal) => {\n                if (newVal && newVal !== oldVal) {\n                    this.retrieveAndInsertPickUpNumbers(ctrl.parentCtrl, ctrl.parentElement, ctrl.parentCtrl.requestsService.requestsDisplay, ctrl.selector);\n                }\n            }\n        );\n    }\n\n    /**\n     *  Method to retrieve and insert the pick-up numbers\n     *  into the given DOM element.\n     *  If the method is called when a previous run\n     *  has not finished, it chains the new insertion\n     *  into the promise of the previous call.\n     *  @param {Object} targetContainer - A DOM element\n     *    containing the elements the pick-up\n     *    numbers are to be inserted.\n     *  @param {Array} requests - An array of request items,\n     *    pick-up numbers of which are to be retrieved.\n     *  @param {function} selector - A selector function to return\n     *    the target DOM elements when called with a\n     *    ancestor DOM element.\n     *  @return {Promise} A Promise to be resolved\n     *    when the pick-up numbers are inserted.\n     */\n    retrieveAndInsertPickUpNumbers(parentCtrl, targetContainer, requests, selector) {\n        if (this._runningPromise) {\n\n            // If there is an ongoing insertion,\n            // perform the new insertion when the former is done.\n            return this._runningPromise.then(() => {\n                return this._insert(parentCtrl, targetContainer, requests, selector);\n            });\n        } else {\n            // Else, perform the insertion.\n            return this._insert(parentCtrl, targetContainer, requests, selector);\n        }\n    }\n\n    getPickupLabel(){\n        let lang = this.location.search().lang;\n        let pickUpLabel;\n        if (lang === 'en') {\n            pickUpLabel = 'Pickup number: ';\n        } else {\n            pickUpLabel = 'Ventehyldenummer: ';\n        }\n        return pickUpLabel;\n    }\n\n    getServiceBaseUrl(){\n        let baseUrl = this.location.$$absUrl;\n        if (baseUrl.includes('kbdk-kgl-psb.primo.exlibrisgroup')){\n            return 'https://public-stage.statsbiblioteket.dk/alma-pickupnumbers/services/public/pickupnumber/';\n        } else if (baseUrl.includes('soeg.kb.dk')){\n            return 'https://webservice.kb.dk/alma-pickupnumbers/services/public/pickupnumber/'\n        } else {\n            return 'https://developer.statsbiblioteket.dk/alma-pickupnumbers/services/public/pickupnumber/';\n        }\n    }\n\n    insertPickUpNumber(pickUpNumber, container) {\n        if (container.innerHTML.indexOf('<span class=\"pickupnumber\">') === -1) {\n            let newElement = \"<br/><span class='pickupnumber'>\" + this.getPickupLabel() + \"</span>\" + pickUpNumber + \"<br/>\";\n            angular.element(container.querySelectorAll('p.request-location')).append(newElement);\n        }\n    }\n\n    insertPickupnumbersToOverview(requests){\n        let element = document.querySelectorAll('prm-requests-overview');\n        if (element.length>0){\n            this.addPickupnumbersToOverview(element, requests);\n        }else{\n            ctrl.$scope.$watch(() => element.length,\n                (newVal, oldVal) => {\n                    if (element.length) {\n                        this.addPickupnumbersToOverview(element, requests);\n                    }\n                }\n            );\n        }\n\n    };\n\n    addPickupnumbersToOverview(element, requests){\n        let overview_requests = angular.element(document.querySelectorAll('prm-requests-overview div[class=\"md-list-item-text layout-fill\"]'));\n        for (let index = 0; index < Object.keys(overview_requests).length-1; index++) {\n            if((this._pickUpNumbersForIds[requests[index].requestId])&&(overview_requests[index].innerHTML.indexOf('<span class=\"pickupnumber\">') === -1)){\n                let newElement = '<p class=\"weak-text\"><span class=\"pickupnumber\">'+ this.getPickupLabel() +'</span><span>'+this._pickUpNumbersForIds[requests[index].requestId]+'</span></p>';\n                angular.element(overview_requests[index]).append(newElement);\n            }\n        }\n}\n\n    _insert(parentCtrl, targetContainer, requests, selector) {\n        let ctrl = this;\n        ctrl._runningPromise = new Promise((resolve, reject) => {\n            let targetElements = selector(targetContainer);\n            let requestObjects = ctrl._composeRequestObjects(targetElements, requests);\n            ctrl._ongoingInsertions = requestObjects.length;\n\n            // Making one promise per request\n            let inserts = [];\n            requestObjects.forEach((request, key) => {\n                inserts[key] = ctrl._insertForRequest(parentCtrl.requestsDisplay[key], request);\n                inserts[key]\n                // Instead of using both then and catch methods and counting down to see when all the promises settled\n                // one can use Promise.allSettled\n                // But it is not supported in ie and some other browsers yet\n                    .then(()=>{\n                    ctrl._ongoingInsertions = ctrl._ongoingInsertions - 1;\n                        if (ctrl._ongoingInsertions === 0) {\n                            this.insertPickupnumbersToOverview(requests);\n                            resolve();\n                        }\n                    })\n                    .catch(()=>{\n                        ctrl._ongoingInsertions = ctrl._ongoingInsertions - 1;\n                        if (ctrl._ongoingInsertions === 0) {\n                            this.insertPickupnumbersToOverview(requests);\n                            resolve();\n                        }\n                    })\n            });\n        });\n\n        return this._runningPromise;\n    }\n\n    // Returns an array of objects with request related data.\n    _composeRequestObjects(targetElements, requests) {\n        return requests.map((request, index) => {\n            return {\n                element: targetElements[index],\n                id: request.requestId,\n                expandedDisplay: request.expandedDisplay,\n                isAlert: request.isAlert  // isAlert is a Primo field, that most likely says if a booking is ready for pickup or not\n            }\n        });\n    };\n\n    // Inserts the pickup number for given request.\n    _insertForRequest(requestsDisplay, request) {\n        let ctrl = this;\n        return new Promise((resolve, reject) => {\n            // If there is no DOM element to be altered,\n            // do nothing.\n            if (!request.element) {\n                reject();\n                return;\n            }\n            if (ctrl._pickUpNumbersForIds[request.id]) {\n                // If the pick-up number for the request is already known, use it.\n                // ctrl._replaceIdText(request, ctrl._pickUpNumbersForIds[request.id]);\n                this.insertPickUpNumber(ctrl._pickUpNumbersForIds[request.id], request.element);\n                resolve();\n            } else if (request.isAlert) {\n                // Else, if isAlert set to true, retrieve and insert the pick-up number.\n                // The requested item can probably only have a pick up number if its isAlert is set to true.\n                    ctrl._retrievePickUpNumber(request.id)\n                        .then(response => {\n                            // Insert the pick-up number text.\n                            let pickUpNumber = response.data.number;\n                            ctrl._pickUpNumbersForIds[request.id] = pickUpNumber;\n                            this.insertPickUpNumber(pickUpNumber, request.element);\n                            resolve();\n                        })\n                        .catch(err => {\n                            // ctrl._removeIdText(request);\n                            console.log('Could not retrieve the pick up number.');\n                            reject(err);\n                            return err;\n                        });\n\n            } else {\n                resolve();\n            }\n\n        });\n\n    }\n\n    // Retrieves the pick up numbers from the associated service.\n    // Request URL may look like the following.\n    _retrievePickUpNumber(requestId) {\n        return this.$http.get(this.getServiceBaseUrl() + requestId);\n    }\n\n\n}\n\nPickUpNumbersService.$inject = ['$http', '$location'];","class PrmRequestsAfterController {\n\n    constructor($scope, $element, pickUpNumbersService) {\n        this.$scope = $scope;\n        this.$element = $element;\n        this.pickUpNumbersService = pickUpNumbersService;\n    }\n\n    $onInit() {\n        this.parentElement = this.$element.parent()[0];\n        this.pickUpNumbersService.waitForIdsAndInsertPickUpNumbers(this);\n    }\n\n    selector(element) {\n        return element.querySelectorAll('md-list-item');\n    }\n\n}\n\nPrmRequestsAfterController.$inject = ['$scope', '$element', 'pickUpNumbersService'];\n\nexport let PrmRequestsAfterConfig = {\n    name: 'prmRequestsAfter',\n    config: {\n        bindings: {\n            parentCtrl: '<'\n        },\n        controller: PrmRequestsAfterController,\n    }\n}","class PrmResourceRecommenderAfterController {\n\n    constructor($element) {\n        this.$element = $element;\n    }\n\n    $onInit() {\n        setTimeout(this.addCloseButtonAndOpenRecommenderIfNeeded, 1000, this.$element);\n    }\n\n    addCloseButtonAndOpenRecommenderIfNeeded(element) {\n        let parentElement = document.querySelectorAll('prm-resource-recommender > div:not(.main-banner-content)')[0];\n        const elem = document.getElementById('closeRecommender');\n        if (elem && parentElement){\n            angular.element(elem).addClass('visible');\n            parentElement.prepend(elem);\n            if (!sessionStorage.hideRecommender){\n                angular.element(elem).parent().addClass('visible');\n            }\n        }\n    }\n\n    closeRecommender(){\n        const elem = document.getElementById('closeRecommender');\n        angular.element(elem).parent().removeClass('visible');\n        sessionStorage.hideRecommender = true;\n    }\n}\n\nPrmResourceRecommenderAfterController.$inject = ['$element'];\n\nexport let PrmResourceRecommenderAfterConfig = {\n    name: 'prmResourceRecommenderAfter',\n    config: {\n        controller: PrmResourceRecommenderAfterController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/resource-recommender/close-button.html';\n        }],\n    }\n}","/**\n * Service to get translations from API.\n */\nexport class GetTranslationsService {\n    constructor($http) {\n        this.$http = $http;\n    }\n\n    // Retrieves translations from the API\n    _getTranslations(language, view){\n        return this.$http.get(`/primaws/rest/pub/translations/${view}?lang=${language}`);\n    }\n\n\n}\n\nGetTranslationsService.$inject = ['$http'];","class PrmPreFiltersAfterController {\n    constructor($element, getTranslationsService, $location) {\n        this.$element = $element;\n        this.getTranslationsService = getTranslationsService;\n        this.location = $location;\n    }\n\n    $postLink() {\n\n        // Do these operations only in Special view\n        if (this.location.search().vid.indexOf(\"SPEC\") || this.location.search().vid.indexOf(\"spec\")) {\n            // 1- Move the yellow search scope element into the search bar\n            // Find parent element\n            let parentElement = angular.element(document.querySelector('prm-search-bar form > div > div'));\n            // Add the element as the first child of the parent\n            parentElement.prepend(document.getElementById('specialViewSearchScope'));\n\n\n            // 2- Change placeholder text in the search bar\n            // First hide the placeholder so the default one won't appear\n            // Get the translation from the API\n            // Wait 500 milliseconds, so the default translation for placeholder comes first\n            // And then overwrite the placeholder text and make it visible\n            angular.element(document.getElementById('searchBar')).addClass('hidePlaceholder');\n\n            let lang = this.location.search().lang || 'da';\n            let viewName = this.location.search().vid;\n            this.changeSearchBarPlaceholder(lang, viewName);\n        }\n\n\n\n    }\n\n    changeSearchBarPlaceholder(lang, viewName){\n        this.getTranslationsService._getTranslations(lang, viewName)\n            .then(response => {\n                let placeHolderText = response.data[\"fulldisplay.homepage.special.search.placeholder\"];\n                setTimeout(function(){\n                    angular.element(document.getElementById('searchBar')).removeClass('hidePlaceholder');\n                    angular.element(document.getElementById('searchBar')).attr('placeholder', placeHolderText);\n                }, 500);\n            })\n            .catch(err => {\n                console.error( err);\n                return err;\n            });\n    }\n}\n\nPrmPreFiltersAfterController.$inject = ['$element', 'getTranslationsService', '$location'];\n\nexport let PrmPreFiltersAfterConfig = {\n    name: 'prmPreFiltersAfter',\n    config: {\n        bindings: {\n            parentCtrl: '<'\n        },\n        controller: PrmPreFiltersAfterController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/special-view/search-scope.html';\n        }],\n    }\n};","!function r(s,a,c){function u(e,n){if(!a[e]){if(!s[e]){var t=\"function\"==typeof require&&require;if(!n&&t)return t(e,!0);if(l)return l(e,!0);var o=new Error(\"Cannot find module '\"+e+\"'\");throw o.code=\"MODULE_NOT_FOUND\",o}var i=a[e]={exports:{}};s[e][0].call(i.exports,function(n){return u(s[e][1][n]||n)},i,i.exports,r,s,a,c)}return a[e].exports}for(var l=\"function\"==typeof require&&require,n=0;n<c.length;n++)u(c[n]);return u}({1:[function(n,e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(n,e,t){return e&&i(n.prototype,e),t&&i(n,t),n};function i(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function r(n,e,t,o){var i=this;!function(n,e){if(!(n instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,r),this.$translate=n,this.$mdToast=e,this.$rootScope=t,this.$cookies=o,this._dismissed=!1,this.$rootScope.$on(\"$translateChangeSuccess\",function(){i._dismissed=!1})}(t.AnnouncementService=(o(r,[{key:\"_dismiss\",value:function(){this._dismissed=!0,this._toastPromise=null}},{key:\"display\",value:function(o){var i=this;return new Promise(function(e,t){!0!==i._dismissed?i.$translate(\"nui.message.announcement\").then(function(n){if(i.$cookies.get(\"announcement\")!==n){if(!n||[\"announcement\",\"&nbsp;\",\"\"].includes(n))return i._toastPromise&&!i._dismissed&&i.$mdToast.hide(),void t(\"No announcement found.\");i._toastPromise=i._toastPromise||i.$mdToast.show({hideDelay:!1,position:\"top\",controller:function(){return{close:function(){i.$mdToast.hide(),i.$translate(\"nui.message.announcement\").then(function(n){return i.$cookies.put(\"announcement\",n)})}}},controllerAs:\"$ctrl\",template:'\\n<md-toast class=\"page-notification\" style=\"top: 0px; position: sticky !important;\">\\n    <div class=\"md-toast-content\" style=\"box-shadow:none; width: 100%;\">\\n        <span class=\\'md-toast-text\\' flex translate=\\'nui.message.announcement\\'>\\n  </span>\\n    </div>\\n    <a class=\"close\" ng-click=\\'$ctrl.close()\\' aria-label=\"{{\\'nui.message.dismiss\\' | translate}}\"\\n       style=\"position: absolute; right: 1.5rem; top: 1.5rem;\">\\n        <prm-icon icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"close\">\\n        </prm-icon>\\n    </a>\\n</md-toast>\\n          '}),i._toastPromise.then(o).catch(o).then(function(){return i._dismiss()}),e()}else t(\"The announcement has been dismissed before.\")}):t(\"The announcement has been dismissed.\")})}}]),r)).$inject=[\"$translate\",\"$mdToast\",\"$rootScope\",\"$cookies\"]},{}],2:[function(n,e,t){\"use strict\";function o(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}Object.defineProperty(t,\"__esModule\",{value:!0});var i=(function(n,e,t){return e&&o(n.prototype,e),t&&o(n,t),n}(r,[{key:\"$onInit\",value:function(){this.announcementService.display().catch(function(n){n&&console.log(n)})}}]),r);function r(n,e,t,o){!function(n,e){if(!(n instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,r),this.announcementService=n,this.$scope=e,this.$element=t,this.$translate=o}i.$inject=[\"announcementService\",\"$scope\",\"$element\",\"$translate\"];t.PrmTopbarAfterConfig={name:\"prmTopbarAfter\",config:{controller:i,require:{primoExploreCtrl:\"^primoExplore\"}}}},{}],3:[function(n,e,t){\"use strict\";var o=n(\"./announcement/announcement.service\"),i=n(\"./announcement/prmTopbarAfter.component\");angular.module(\"viewCustom\").service(\"announcementService\",o.AnnouncementService).component(i.PrmTopbarAfterConfig.name,i.PrmTopbarAfterConfig.config)},{\"./announcement/announcement.service\":1,\"./announcement/prmTopbarAfter.component\":2}]},{},[3]);","!function t(o,i,a){function u(n,e){if(!i[n]){if(!o[n]){var r=\"function\"==typeof require&&require;if(!e&&r)return r(n,!0);if(f)return f(n,!0);throw(e=new Error(\"Cannot find module '\"+n+\"'\")).code=\"MODULE_NOT_FOUND\",e}r=i[n]={exports:{}},o[n][0].call(r.exports,function(e){return u(o[n][1][e]||e)},r,r.exports,t,o,i,a)}return i[n].exports}for(var f=\"function\"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,n,r){\"use strict\";function t(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,\"value\"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function o(){if(!(this instanceof o))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(r,\"__esModule\",{value:!0}),function(e,n,r){n&&t(e.prototype,n),r&&t(e,r)}(o,[{key:\"$onInit\",value:function(){this.isLoggedIn=this.parentCtrl.isLoggedIn,this.isLoggedIn&&angular.element(document).ready(function(){var e=angular.element(document.querySelector('div[data-main-menu-item=\"new_user\"]'));e&&0!==e.length&&e.css(\"display\",\"none\")})}}]);r.PrmTopNavBarLinksAfterConfig={name:\"prmTopNavBarLinksAfter\",config:{bindings:{parentCtrl:\"<\"},controller:o}}},{}],2:[function(e,n,r){\"use strict\";e=e(\"./hide-new-user-if-loggedin/prmTopNavBarLinksAfter.component\");angular.module(\"viewCustom\").component(e.PrmTopNavBarLinksAfterConfig.name,e.PrmTopNavBarLinksAfterConfig.config)},{\"./hide-new-user-if-loggedin/prmTopNavBarLinksAfter.component\":1}]},{},[2]);"]}

