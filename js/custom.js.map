{"version":3,"sources":["node_modules/browser-pack/_prelude.js","primo-explore/custom/45KBDK_KGL-KGL/js/categorize-pickup-locations/kbPickupLocations.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/categorize-pickup-locations/prmRequestAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/chat-box/scriptIds.constant.js","primo-explore/custom/45KBDK_KGL-KGL/js/edit-profile/kbEditProfile.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/edit-profile/prmPersonalInfoAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/footerAndHelp/kbFooter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/footerAndHelp/kbHelp.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/footerAndHelp/prmExploreFooterAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/help-page/kbHelpPage.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/help-page/kbHelpPageHeader.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/home/kbHome.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/language/kbLanguage.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/language/prmUserAreaExpandableAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/main.js","primo-explore/custom/45KBDK_KGL-KGL/js/move-request-another-bin/prmServiceButtonAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/navigation-header/kbNavigationHeader.js","primo-explore/custom/45KBDK_KGL-KGL/js/navigation-header/prmTopBarBefore.js","primo-explore/custom/45KBDK_KGL-KGL/js/open-items-location-filter/prmLocationItemsAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/pickup-numbers/pickUpNumbers.service.js","primo-explore/custom/45KBDK_KGL-KGL/js/pickup-numbers/prmRequestsAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/js/services/getTranslations.service.js","primo-explore/custom/45KBDK_KGL-KGL/js/special-view/prmPreFiltersAfter.component.js","primo-explore/custom/45KBDK_KGL-KGL/node_modules/kb-primo-ve-announcement/dist/index.js","primo-explore/custom/45KBDK_KGL-KGL/node_modules/kb-primo-ve-hide-new-user-if-loggedin/dist/index.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","KbPickupLocationsController","timesRunIntervalIdFindButton","intervalIdFindButton","setInterval","findRequestButtonAndAttachJavascriptToIt","mdOptions","document","querySelectorAll","console","log","forEach","mdOption","style","display","addEventListener","querySelector","labels","label","index","fontWeight","classList","add","remove","openOrCloseALocationGroup","event","stopImmediatePropagation","children","currentTarget","parentNode","j","target","timesRunIntervalIdFindPickupLocationSelect","intervalIdFindPickupLocationSelect","pickupLocationSelectInput","angular","element","addCssAndJavascriptEventsToLabelsAndOptions","clearInterval","prmServiceButtons","startSearchingForPickupLocationField","_classCallCheck","this","KbPickupLocationsConfig","name","config","controller","PrmRequestAfterConfig","template","scriptIds","en","da","KbEditProfileController","append","$element","$inject","KbEditProfileConfig","templateUrl","viewName","PrmPersonalInfoAfterConfig","bindings","parentCtrl","KbFooterConfig","KbHelpController","getHelpTextFromAPI","_this","location","search","vid","_getTranslations","lang","then","response","help","createHelpJson","data","catch","err","error","translationObject","subheaders","Object","keys","filter","v","startsWith","options","mainHeader","subheadersLength","push","subheader","submenu","iconset","icondefinition","view","getTranslationsService","bodyContent","helpMenu","getElementById","hasClass","$mdDialog","show","contentElement","parent","getElementsByName","hasBackdrop","multiple","clickOutsideToClose","fullscreen","focusOnOpen","cancel","id","$http","$location","helpButtonTemplateUrl","helpMenuTemplateUrl","helpMenuHeaderTemplateUrl","helpMenuBodyTemplateUrl","helpSubMenuBodyTemplateUrl","KbHelpConfig","PrmExploreFooterAfterConfig","KbHelpPageController","window","pageYOffset","visibility","indexOf","onclick","OnFixedButtonsHolderClick","showScrollButton","scrollTo","top","left","behavior","KbHelpPageConfig","KbHelpPageHeaderController","KbHelpPageHeaderConfig","KbHomeController","replace","KbHomeConfig","KbLanguageController","newLang","getElementsByTagName","$window","href","absUrl","KbLanguageConfig","PrmUserAreaExpandableAfterConfig","_kbHome","_prmPreFiltersAfter","_prmPersonalInfoAfter","_kbEditProfile","_kbHelpPage","_kbHelpPageHeader","_prmExploreFooterAfter","_kbFooter","_kbHelp","_prmTopBarBefore","_kbNavigationHeader","_prmUserAreaExpandableAfter","_kbLanguage","_scriptIds","_prmLocationItemsAfter","_prmServiceButtonAfter","_pickUpNumbers","_prmRequestsAfter","_prmRequestAfter","_kbPickupLocations","constant","url","substring","query","pathname","service","GetTranslationsService","component","PrmPreFiltersAfterConfig","PrmTopBarBeforeConfig","KbNavigationHeaderConfig","PrmLocationItemsAfterConfig","PrmServiceButtonAfterConfig","PickUpNumbersService","PrmRequestsAfterConfig","PrmServiceButtonAfterController","intervalId","$interval","AlmaRequestOther","textContent","container","tagName","addClass","css","requestButtons","getElementsByClassName","backButtons","_i","KbNavigationHeaderController","parentElement","PrmLocationItemsAfterController","filterBtn1","filterBtn2","filterDiv","triggerHandler","$intervalId","activateFilter","_pickUpNumbersForIds","_runningPromise","_ongoingInsertions","ctrl","$scope","$watch","selector","newVal","oldVal","retrieveAndInsertPickUpNumbers","requestsService","requestsDisplay","targetContainer","requests","_this2","_insert","baseUrl","$$absUrl","includes","pickUpNumber","newElement","innerHTML","getPickupLabel","_this3","addPickupnumbersToOverview","overview_requests","requestId","_this4","Promise","resolve","reject","targetElements","requestObjects","_composeRequestObjects","inserts","request","key","_insertForRequest","insertPickupnumbersToOverview","map","expandedDisplay","isAlert","_this5","insertPickUpNumber","_retrievePickUpNumber","number","get","getServiceBaseUrl","PrmRequestsAfterController","pickUpNumbersService","waitForIdsAndInsertPickUpNumbers","language","PrmPreFiltersAfterController","prepend","changeSearchBarPlaceholder","placeHolderText","setTimeout","removeClass","attr","s","l","defineProperty","value","enumerable","configurable","writable","TypeError","$translate","$mdToast","$rootScope","$cookies","_dismissed","$on","AnnouncementService","_toastPromise","hide","hideDelay","position","close","put","controllerAs","_dismiss","prototype","2","announcementService","PrmTopbarAfterConfig","primoExploreCtrl","3","./announcement/announcement.service","./announcement/prmTopbarAfter.component","isLoggedIn","ready","PrmTopNavBarLinksAfterConfig","./hide-new-user-if-loggedin/prmTopNavBarLinksAfter.component"],"mappings":"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","file":"custom.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","// Related to following Jira Issue:\n// https://sbprojects.statsbiblioteket.dk/jira/browse/BSV-213\nclass KbPickupLocationsController {\n    constructor() {\n    };\n\n    // Test here:\n    // http://192.168.225.128:8003/discovery/fulldisplay?docid=alma99122559747705763&context=L&vid=45KBDK_KGL:KGL&lang=da&search_scope=MyInst_and_CI&adaptor=Local%20Search%20Engine&tab=Everything&query=any,contains,kvinde&offset=0\n    // Login\n    // Click on 'Bestil'\n    // Afhentningssted\n    $postLink() {\n        // Because we hook to prmRequestAfter, and the button is not in that group\n        // so we need to wait a bit so the button is there (hopefully).\n        KbPickupLocationsController.timesRunIntervalIdFindButton = 0;\n        KbPickupLocationsController.intervalIdFindButton = setInterval(KbPickupLocationsController.findRequestButtonAndAttachJavascriptToIt, 500);\n    };\n\n\n    static addCssAndJavascriptEventsToLabelsAndOptions() {\n        const mdOptions = document.querySelectorAll('md-select-menu md-optgroup md-option');\n        console.log('mdOptions:', mdOptions);\n        mdOptions.forEach(mdOption => {\n            mdOption.style.display = \"none\";\n            // It is a fix for the options which are further down the menu\n            // that is, for some weired reasons, menu won't get closed after choosing an option.\n            mdOption.addEventListener(\"click\", function () {\n                    if (document.querySelector('body > .md-select-menu-container')) {\n                        document.querySelector('body > .md-select-menu-container').style.display = 'none';\n                    }\n                }\n            );\n        });\n\n        const labels = document.querySelectorAll('md-select-menu md-optgroup label');\n        console.log('labels:', labels);\n        labels.forEach((label, index) => {\n            label.style.fontWeight = 'bold';\n            label.classList.add('plus');\n            label.classList.remove('minus');\n\n            label.addEventListener(\"click\", function () {\n                KbPickupLocationsController.openOrCloseALocationGroup(event, labels, index);\n            });\n        });\n    }\n\n    static openOrCloseALocationGroup(event, labels, i) {\n        event.stopImmediatePropagation();\n        let children = event.currentTarget.parentNode.children;\n        for (let j = 0; j < children.length; j++) {\n            if (children[j] !== event.target) {\n                if (children[j].style.display === \"none\") {\n                    children[j].style.display = \"flex\";\n                    labels[i].classList.add('minus');\n                    labels[i].classList.remove('plus');\n                } else {\n                    children[j].style.display = \"none\";\n                    labels[i].classList.add('plus');\n                    labels[i].classList.remove('minus');\n                }\n            }\n        }\n    }\n\n    static startSearchingForPickupLocationField() {\n        KbPickupLocationsController.timesRunIntervalIdFindPickupLocationSelect = 0;\n        KbPickupLocationsController.intervalIdFindPickupLocationSelect = setInterval(function () {\n            KbPickupLocationsController.timesRunIntervalIdFindPickupLocationSelect += 1;\n            const pickupLocationSelectInput = angular.element(document.querySelectorAll('#form_field_pickupLocation md-select'));\n            console.log('pickupLocationSelectInput', pickupLocationSelectInput, 'timesRunIntervalIdFindPickupLocationSelect:', KbPickupLocationsController.timesRunIntervalIdFindPickupLocationSelect);\n            // When 'pickupLocation field' is found then attach the changes to its click event and stop the interval.\n            if (pickupLocationSelectInput.length) {\n                pickupLocationSelectInput[0].addEventListener(\"click\", KbPickupLocationsController.addCssAndJavascriptEventsToLabelsAndOptions);\n                clearInterval(KbPickupLocationsController.intervalIdFindPickupLocationSelect);\n            } else {\n                if(KbPickupLocationsController.timesRunIntervalIdFindPickupLocationSelect === 10){\n                    clearInterval(KbPickupLocationsController.intervalIdFindPickupLocationSelect);\n                }\n            }\n\n        }, 500);\n    }\n\n    static findRequestButtonAndAttachJavascriptToIt() {\n        KbPickupLocationsController.timesRunIntervalIdFindButton += 1;\n        const prmServiceButtons = angular.element(document.querySelectorAll('prm-service-button button'));\n        console.log('prmServiceButtons:', prmServiceButtons, 'timesRunIntervalIdFindButton:', KbPickupLocationsController.timesRunIntervalIdFindButton);\n        if (KbPickupLocationsController.timesRunIntervalIdFindButton === 10 || prmServiceButtons.length){\n            clearInterval(KbPickupLocationsController.intervalIdFindButton);\n        }\n        for (let i = 0; i < prmServiceButtons.length; i++) {\n            prmServiceButtons[i].addEventListener(\"click\", KbPickupLocationsController.startSearchingForPickupLocationField);\n        }\n    }\n}\n\nexport let KbPickupLocationsConfig = {\n    name: 'kbPickupLocations',\n    config: {\n        controller: KbPickupLocationsController\n    }\n};","// Related to following Jira Issue:\n// https://sbprojects.statsbiblioteket.dk/jira/browse/BSV-213\n\nexport let PrmRequestAfterConfig = {\n    name: 'prmRequestAfter',\n    config: {\n        template: `<kb-pickup-locations parent-ctrl='$ctrl.parentCtrl'></kb-pickup-locations>`,\n    }\n};","export const scriptIds = {\n    'en': 'b19d8ae41c784590fd84ba51114c29d2',\n    'da': '668df01b6f2cd836279a993a8fc944ec'\n};","class KbEditProfileController {\n    constructor($element) {\n        this.$element = $element;\n    };\n\n    $postLink() {\n        // Move edit-profile button to the desired position\n        let container = angular.element(document.querySelector('md-card#personalDetails .md-toolbar-tools'));\n        container.append(this.$element);\n    };\n}\n\nKbEditProfileController.$inject = ['$element'];\nexport let KbEditProfileConfig = {\n    name: 'kbEditProfile',\n    config: {\n        controller: KbEditProfileController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/edit-profile/edit-profile.html';\n        }],\n    }\n};","export let PrmPersonalInfoAfterConfig = {\n    name: 'prmPersonalInfoAfter',\n    config: {\n        bindings: {parentCtrl: '<'},\n        template: `<kb-edit-profile></kb-edit-profile>`,\n    }\n};","export let KbFooterConfig = {\n    name: 'kbFooter',\n    config: {\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/footer/footer.html';\n        }],\n    }\n};","\nclass KbHelpController {\n\n    constructor($http, $location, $mdDialog, viewName, getTranslationsService) {\n        this.getTranslationsService = getTranslationsService;\n        this.$http = $http;\n        this.$mdDialog = $mdDialog;\n        this.viewName = viewName;\n        this.location = $location;\n        this.lang = \"da\";\n        this.bodyContent = 'main-menu';\n        this.helpButtonTemplateUrl = 'custom/' + viewName + '/html/help-button/help-button.html';\n        this.helpMenuTemplateUrl = 'custom/' + viewName + '/html/help-button/help-menu.html';\n        this.helpMenuHeaderTemplateUrl = 'custom/' + viewName + '/html/help-button/help-menu-header.html';\n        this.helpMenuBodyTemplateUrl = 'custom/' + viewName + '/html/help-button/help-menu-body.html';\n        this.helpSubMenuBodyTemplateUrl = 'custom/' + viewName + '/html/help-button/help-sub-menu-body.html';\n        this.help = {};\n    };\n\n        $onInit() {\n            this.getHelpTextFromAPI();\n        }\n\n        getHelpTextFromAPI(){\n            let viewName = this.location.search().vid;\n            console.log('viewName:',viewName);\n            this._getTranslations(this.lang, viewName)\n                .then(response => {\n                    this.help = this.createHelpJson(response.data);\n                })\n                .catch(err => {\n                    console.error(err);\n                    return err;\n                });\n        }\n\n        createHelpJson(translationObject) {\n            let help = {};\n            let subheaders = Object.keys(translationObject).filter(v => v.startsWith('fulldisplay.help.subheader'));\n            help.options = [];\n            help.mainHeader = translationObject[\"fulldisplay.help.mainheader\"];\n            let subheadersLength =  subheaders ? subheaders.length : 0;\n\n            for (let i = 0; i < subheadersLength; i++) {\n                if (translationObject[`fulldisplay.help.subheader${i + 1}`] === 'line'){\n                    help.options.push({\n                        subheader: 'line',\n                    });\n                }else {\n                    help.options.push({\n                        subheader: translationObject[`fulldisplay.help.subheader${i + 1}`],\n                        submenu: translationObject[`fulldisplay.help.sub${i + 1}`],\n                        iconset: translationObject[`fulldisplay.help.iconset${i + 1}`],\n                        icondefinition: translationObject[`fulldisplay.help.icondefinition${i + 1}`],\n                    });\n                }\n            }\n            return help;\n        }\n\n\n        _getTranslations(lang, view){\n            return this.getTranslationsService._getTranslations(lang, view);\n        }\n\n\n\n    openHelpMenu() {\n        this.bodyContent = 'main-menu';\n        let helpMenu = document.getElementById('helpMenu');\n        // Remove and add md-dialog-container to the helpMenu so it doesn't interfere with Primo's\n        if (!angular.element(document.querySelectorAll('#helpMenu')).hasClass('md-dialog-container')) {\n            helpMenu.classList.add('md-dialog-container');\n            this.$mdDialog.show({\n                contentElement: '#helpMenu',\n                parent: angular.element(document.getElementsByName('kb-help')[0]),\n                // Not using standard backdrop because it is interfering with Primo's\n                hasBackdrop: false,\n                multiple: true,\n                clickOutsideToClose: false,\n                fullscreen: true,\n                focusOnOpen: true,\n            });\n        }\n    };\n\n        hideHelpMenu(){\n            this.$mdDialog.cancel();\n            let helpMenu = document.getElementById('helpMenu');\n            helpMenu.classList.remove('md-dialog-container');\n        };\n\n        changeBodyContent(id){\n            this.bodyContent = id;\n        };\n\n}\n\nKbHelpController.$inject = ['$http', '$location', '$mdDialog', 'viewName', 'getTranslationsService'];\n\nexport let KbHelpConfig = {\n    name: 'kbHelp',\n    config: {\n        controller: KbHelpController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/help-button/help.html';\n        }],\n     },\n};","export let PrmExploreFooterAfterConfig = {\n    name: 'prmExploreFooterAfter',\n    config: {\n        bindings: {parentCtrl: '<'},\n        template: `<kb-footer></kb-footer>\n                   <kb-help parent-ctrl='$ctrl.parentCtrl'></kb-help>`,\n    }\n};","class KbHelpPageController {\n\n\n\n    constructor() {\n    };\n\n    static OnFixedButtonsHolderClick(){\n        window.scrollTo({\n            top: 0,\n            left: 0,\n            behavior: 'smooth'\n        });\n    };\n\n    showScrollButton(){\n        if(window.pageYOffset !== 0){\n            document.getElementById('fixedButtonsHolder').style.visibility = \"visible\";\n        } else{\n            document.getElementById('fixedButtonsHolder').style.visibility = \"hidden\";\n        }\n    }\n\n    $postLink() {\n        let url = window.location.search;\n        let index = url.indexOf('SPEC');\n        this.view = index > 0 ? 'special' : 'general';\n\n        document.getElementById('fixedButtonsHolder').onclick = KbHelpPageController.OnFixedButtonsHolderClick;\n        window.addEventListener(\"scroll\", this.showScrollButton);\n    };\n\n\n}\n\nexport let KbHelpPageConfig = {\n    name: 'kbHelpPage',\n    config: {\n        controller: KbHelpPageController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/help/kb-help-page.html';\n        }],\n    }\n};","class KbHelpPageHeaderController {\n\n    constructor() {\n    };\n\n    $postLink() {\n        let url = window.location.search;\n        let index = url.indexOf('SPEC');\n        this.view = index > 0 ? 'special' : 'general';\n    };\n}\n\nexport let KbHelpPageHeaderConfig = {\n    name: 'kbHelpPageHeader',\n    config: {\n        controller: KbHelpPageHeaderController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/help/kb-help-page-header.html';\n        }],\n    }\n};","class KbHomeController {\n\n    constructor($location) {\n        this.location = $location;\n    };\n\n    $postLink() {\n        this.vid = this.location.search().vid.replace(\":\", \"-\");\n        let index = this.vid.indexOf('SPEC');\n        this.view = index > 0 ? 'special' : 'general';\n    };\n}\n\nKbHomeController.$inject = ['$location'];\n\n\nexport let KbHomeConfig = {\n    name: 'kbHome',\n    config: {\n        controller: KbHomeController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/homepage/kb-homepage.html';\n        }],\n    }\n};","class KbLanguageController {\n\n    constructor($window, $location) {\n        this.$window = $window;\n        this.$location = $location;\n        this.lang = this.parentCtrl.lang;\n\n    };\n\n    changeLanguage() {\n        let newLang = this.lang === 'da'? 'en' : 'da';\n        this.$location.search('lang', newLang);\n        document.getElementsByTagName(\"html\")[0].lang = newLang;\n        this.$window.location.href = this.$location.absUrl();\n    }\n\n}\n\nKbLanguageController.$inject = ['$window', '$location'];\n\nexport let KbLanguageConfig=  {\n    name: 'kbLanguage',\n    config: {\n        bindings: {\n            parentCtrl: '<',\n        },\n        controller: KbLanguageController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/language/language.html';\n        }],\n    }\n};","export let PrmUserAreaExpandableAfterConfig=  {\n    name: 'prmUserAreaExpandableAfter',\n    config: {\n        bindings: {\n            parentCtrl: '<'\n        },\n        template: `<kb-language parent-ctrl='$ctrl.parentCtrl'></kb-language>`,\n    }\n};","// General services\nimport {GetTranslationsService } from \"./services/getTranslations.service\";\n\n// KB special view home for university thesis\nimport {KbHomeConfig} from './home/kbHome.component';\n\n// Special view\nimport {PrmPreFiltersAfterConfig} from './special-view/prmPreFiltersAfter.component';\n\n// Edit profile\nimport {PrmPersonalInfoAfterConfig} from './edit-profile/prmPersonalInfoAfter.component';\nimport {KbEditProfileConfig} from './edit-profile/kbEditProfile.component';\n\n// Help page\nimport {KbHelpPageConfig} from './help-page/kbHelpPage.component';\nimport {KbHelpPageHeaderConfig} from './help-page/kbHelpPageHeader.component';\n\n// Footer\nimport {PrmExploreFooterAfterConfig} from './footerAndHelp/prmExploreFooterAfter.component';\nimport {KbFooterConfig} from './footerAndHelp/kbFooter.component';\n\nimport {KbHelpConfig} from './footerAndHelp/kbHelp.component';\n\n// Navigation header\nimport {PrmTopBarBeforeConfig} from './navigation-header/prmTopBarBefore';\nimport {KbNavigationHeaderConfig} from './navigation-header/kbNavigationHeader';\n\n// Language switcher\nimport {PrmUserAreaExpandableAfterConfig} from './language/prmUserAreaExpandableAfter.component';\nimport {KbLanguageConfig} from './language/kbLanguage.component';\n\n// ChatBox scriptId\nimport {scriptIds} from \"./chat-box/scriptIds.constant\";\n\n// Open items location filter\nimport {PrmLocationItemsAfterConfig} from \"./open-items-location-filter/prmLocationItemsAfter.component\";\n\n// Move request-another-volume\nimport {PrmServiceButtonAfterConfig} from \"./move-request-another-bin/prmServiceButtonAfter.component\";\n\n// Add pickup numbers\nimport {PickUpNumbersService } from \"./pickup-numbers/pickUpNumbers.service\";\nimport {PrmRequestsAfterConfig} from \"./pickup-numbers/prmRequestsAfter.component\";\n\n// Categorize pickup locations\nimport {PrmRequestAfterConfig} from \"./categorize-pickup-locations/prmRequestAfter.component\";\nimport {KbPickupLocationsConfig} from \"./categorize-pickup-locations/kbPickupLocations.component\";\n\nangular.module('viewCustom', ['angularLoad'])\n\n    .constant('viewName', (function () {\n            let url = window.location.search.substring(1);\n            let query = url.substring(url.indexOf('vid') + 4);\n            // in 'Alma Viewer page'\n            if(!url){\n                url = window.location.pathname;\n                query = url.substring(url.indexOf('/delivery/')+10);\n                query = query.substring(0, query.indexOf('/'));\n            }\n            // If there are other parameters after vid, then remove them\n            let vid = query.substring(0, query.indexOf('&')) ? query.substring(0, query.indexOf('&')) : query;\n        vid = vid.replace(\"%3A\", \"-\");\n        console.log('vid:',vid);\n        return vid.replace(\":\", \"-\");\n    })()\n    )\n\n    // ChatBox scriptId\n    .constant('scriptIds' , scriptIds)\n\n    // General services\n    .service('getTranslationsService', GetTranslationsService)\n\n    // Help page\n    .component(KbHelpPageHeaderConfig.name, KbHelpPageHeaderConfig.config)\n    .component(KbHelpPageConfig.name, KbHelpPageConfig.config)\n\n    // KB special view home for university thesis\n    .component(KbHomeConfig.name, KbHomeConfig.config)\n\n    // Special view\n    .component(PrmPreFiltersAfterConfig.name, PrmPreFiltersAfterConfig.config)\n\n    // Categorize pickup locations\n    .component(PrmRequestAfterConfig.name, PrmRequestAfterConfig.config)\n    .component(KbPickupLocationsConfig.name, KbPickupLocationsConfig.config)\n\n    // Edit profile\n    .component(PrmPersonalInfoAfterConfig.name, PrmPersonalInfoAfterConfig.config)\n    .component(KbEditProfileConfig.name, KbEditProfileConfig.config)\n\n    // Footer and help\n    .component(PrmExploreFooterAfterConfig.name, PrmExploreFooterAfterConfig.config)\n    .component(KbFooterConfig.name, KbFooterConfig.config)\n\n   .component(KbHelpConfig.name, KbHelpConfig.config)\n\n    // Navigation header\n    .component(PrmTopBarBeforeConfig.name, PrmTopBarBeforeConfig.config)\n    .component(KbNavigationHeaderConfig.name, KbNavigationHeaderConfig.config)\n\n    // Open items location filter\n    .component(PrmLocationItemsAfterConfig.name, PrmLocationItemsAfterConfig.config)\n\n    // Move request-another-volume\n    .component(PrmServiceButtonAfterConfig.name, PrmServiceButtonAfterConfig.config)\n\n    // Language switcher\n    .component(PrmUserAreaExpandableAfterConfig.name, PrmUserAreaExpandableAfterConfig.config)\n    .component(KbLanguageConfig.name, KbLanguageConfig.config)\n\n    // Add pickup numbers\n    .service('pickUpNumbersService', PickUpNumbersService)\n    .component(PrmRequestsAfterConfig.name, PrmRequestsAfterConfig.config)\n\n// Get more info at https://github.com/Det-Kongelige-Bibliotek/KB-Primo-VE-Announcement\nrequire('kb-primo-ve-announcement');\n\n// Get more info at https://github.com/Det-Kongelige-Bibliotek/KB-Primo-VE-Hide-New-User-If-Loggedin.git\nrequire('kb-primo-ve-hide-new-user-if-loggedin');\n\n// Get more info at https://github.com/Det-Kongelige-Bibliotek/KB-Primo-VE-libChat.git\n// require('kb-primo-ve-libchat');\n","class PrmServiceButtonAfterController {\n    constructor($element, $interval) {\n        this.$element = $element;\n        this.$interval = $interval;\n    };\n    $postLink() {\n        let _this = this;\n        this.intervalId = this.$interval(function(){\n            let AlmaRequestOther = angular.element(document.querySelector(\"span[translate='AlmaRequestOther']\"));\n            if(AlmaRequestOther.length){\n                _this.$interval.cancel(_this.intervalId);\n                AlmaRequestOther = AlmaRequestOther.parent().parent();\n                if(AlmaRequestOther[0].textContent === angular.element(_this.$element.parent())[0].textContent){\n                    let container = AlmaRequestOther.parent();\n                    while ((!container.hasClass(\"section-body\"))&&(container[0].tagName !== \"BODY\")){\n                        container = container.parent();\n                    }\n                    container.append(AlmaRequestOther.parent());\n                    AlmaRequestOther.parent().addClass('orderAtTheBottom');\n                    AlmaRequestOther.parent().css('float','right');\n                    let requestButtons = angular.element(document.querySelectorAll(\"span[translate='AlmaItemRequest']\"));\n                    for (let i = 0; i < requestButtons.length; i++) {\n                        requestButtons[i].addEventListener(\"click\", function(){\n                            if(document.getElementsByClassName(\"orderAtTheBottom\") && document.getElementsByClassName(\"orderAtTheBottom\").length){\n                                console.log('hej');\n                                AlmaRequestOther.css('display', 'none');\n                            }\n\n                        });\n                    }\n                    let backButtons = angular.element(document.querySelectorAll(\"prm-opac-back-button button\"));\n                    for (let i = 0; i < backButtons.length; i++) {\n                        backButtons[i].addEventListener(\"click\", function(){\n                            if(document.getElementsByClassName(\"orderAtTheBottom\") && document.getElementsByClassName(\"orderAtTheBottom\").length){\n                                document.getElementsByClassName(\"orderAtTheBottom\")[0].remove();\n                                AlmaRequestOther.css('display', 'inline-block');\n                            }\n\n                        });\n                    }\n                }\n            }\n        }, 500, 5);\n    };\n}\n\nPrmServiceButtonAfterController.$inject = ['$element', '$interval'];\n\nexport let PrmServiceButtonAfterConfig = {\n    name: 'prmServiceButtonAfter',\n    config: {\n        bindings: {\n            parentCtrl: '<'\n        },\n        controller: PrmServiceButtonAfterController,\n    },\n}","class KbNavigationHeaderController {\n    constructor($element) {\n        this.$element = $element;\n    };\n\n    $postLink() {\n        // Find containers parent element\n        let parentElement = this.$element.parent().parent().parent().parent();\n        // Move navigation header to the top\n        let container = angular.element(parentElement.children()[0]);\n        container.append(this.$element);\n    };\n}\n\nKbNavigationHeaderController.$inject = ['$element'];\n\nexport let KbNavigationHeaderConfig = {\n    name: 'kbNavigationHeader',\n    config: {\n        bindings: {\n            parentCtrl: '<'\n        },\n        controller: KbNavigationHeaderController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/navigation-header/navigation-header.html';\n        }],\n    },\n}","export let PrmTopBarBeforeConfig = {\n    name: 'prmTopBarBefore',\n    config: {\n        bindings: {\n            parentCtrl: '<'\n        },\n        template:`<kb-navigation-header parent-ctrl='$ctrl.parentCtrl'></kb-navigation-header>`,\n    }\n};","class PrmLocationItemsAfterController {\n    constructor($interval) {\n        this.$interval = $interval;\n    }\n\n    activateFilter(intervalId) {\n        // Two different filter buttons in different pages. Hopefully there is not more\n        let filterBtn1 = angular.element(document.querySelectorAll(\"prm-locations > div > button.md-icon-button.md-ink-ripple\"));\n        let filterBtn2 = angular.element(document.querySelectorAll(\"prm-location-items  div  button.md-icon-button.md-ink-ripple\"));\n        // If the filter div exists it means it is already open\n        let filterDiv = angular.element(document.querySelectorAll(\"prm-locations-filter md-input-container\"));\n\n        if ((filterBtn1.length || filterBtn2.length) && !filterDiv.length) {\n            this.$interval.cancel(intervalId);\n            if (filterBtn1.length){\n                filterBtn1.triggerHandler('click');\n            }\n            if (filterBtn2.length){\n                filterBtn2.triggerHandler('click');\n            }\n        }else{\n            if (filterDiv.length){\n                this.$interval.cancel(intervalId);\n            }\n        }\n    }\n\n    $postLink() {\n        let _this = this;\n        this.$intervalId = this.$interval(function(){\n            _this.activateFilter(_this.$intervalId);\n        }, 500, 10);\n    }\n}\n\nPrmLocationItemsAfterController.$inject = ['$interval'];\n\nexport let PrmLocationItemsAfterConfig = {\n    name: 'prmLocationItemsAfter',\n    config: {\n        bindings: {\n            parentCtrl: '<'\n        },\n        controller: PrmLocationItemsAfterController\n    }\n};","/**\n * Service to insert the pick up numbers for the requested items.\n */\nexport class PickUpNumbersService {\n    constructor($http, $location) {\n        this.$http = $http;\n        this.location = $location;\n        this._pickUpNumbersForIds = {};\n        this._runningPromise;\n        this._ongoingInsertions = 0;\n    }\n\n    /**\n     * Binds a watcher to the given controller.\n     * The watcher watches for the elements\n     * containing the request IDs, and when the\n     * elements become available, inserts the pickup\n     * numbers if they exist.*/\n\n    waitForIdsAndInsertPickUpNumbers(ctrl) {\n        ctrl.$scope.$watch(() => ctrl.selector(ctrl.parentElement).length,\n            (newVal, oldVal) => {\n                if (newVal && newVal !== oldVal) {\n                    this.retrieveAndInsertPickUpNumbers(ctrl.parentCtrl, ctrl.parentElement, ctrl.parentCtrl.requestsService.requestsDisplay, ctrl.selector);\n                }\n            }\n        );\n    }\n\n    /**\n     *  Method to retrieve and insert the pick-up numbers\n     *  into the given DOM element.\n     *  If the method is called when a previous run\n     *  has not finished, it chains the new insertion\n     *  into the promise of the previous call.\n     *  @param {Object} targetContainer - A DOM element\n     *    containing the elements the pick-up\n     *    numbers are to be inserted.\n     *  @param {Array} requests - An array of request items,\n     *    pick-up numbers of which are to be retrieved.\n     *  @param {function} selector - A selector function to return\n     *    the target DOM elements when called with a\n     *    ancestor DOM element.\n     *  @return {Promise} A Promise to be resolved\n     *    when the pick-up numbers are inserted.\n     */\n    retrieveAndInsertPickUpNumbers(parentCtrl, targetContainer, requests, selector) {\n        if (this._runningPromise) {\n\n            // If there is an ongoing insertion,\n            // perform the new insertion when the former is done.\n            return this._runningPromise.then(() => {\n                return this._insert(parentCtrl, targetContainer, requests, selector);\n            });\n        } else {\n            // Else, perform the insertion.\n            return this._insert(parentCtrl, targetContainer, requests, selector);\n        }\n    }\n\n    getPickupLabel(){\n        let lang = this.location.search().lang;\n        let pickUpLabel;\n        if (lang === 'en') {\n            pickUpLabel = 'Pickup number: ';\n        } else {\n            pickUpLabel = 'Ventehyldenummer: ';\n        }\n        return pickUpLabel;\n    }\n\n    getServiceBaseUrl(){\n        let baseUrl = this.location.$$absUrl;\n        if (baseUrl.includes('kbdk-kgl-psb.primo.exlibrisgroup')){\n            return 'https://public-stage.statsbiblioteket.dk/alma-pickupnumbers/services/public/pickupnumber/';\n        } else if (baseUrl.includes('soeg.kb.dk')){\n            return 'https://webservice.kb.dk/alma-pickupnumbers/services/public/pickupnumber/'\n        } else {\n            return 'https://developer.statsbiblioteket.dk/alma-pickupnumbers/services/public/pickupnumber/';\n        }\n    }\n\n    insertPickUpNumber(pickUpNumber, container) {\n        if (container.innerHTML.indexOf('<span class=\"pickupnumber\">') === -1) {\n            let newElement = \"<br/><span class='pickupnumber'>\" + this.getPickupLabel() + \"</span>\" + pickUpNumber + \"<br/>\";\n            angular.element(container.querySelectorAll('p.request-location')).append(newElement);\n        }\n    }\n\n    insertPickupnumbersToOverview(requests){\n        let element = document.querySelectorAll('prm-requests-overview');\n        if (element.length>0){\n            this.addPickupnumbersToOverview(element, requests);\n        }else{\n            ctrl.$scope.$watch(() => element.length,\n                (newVal, oldVal) => {\n                    if (element.length) {\n                        this.addPickupnumbersToOverview(element, requests);\n                    }\n                }\n            );\n        }\n\n    };\n\n    addPickupnumbersToOverview(element, requests){\n        let overview_requests = angular.element(document.querySelectorAll('prm-requests-overview div[class=\"md-list-item-text layout-fill\"]'));\n        for (let index = 0; index < Object.keys(overview_requests).length-1; index++) {\n            if((this._pickUpNumbersForIds[requests[index].requestId])&&(overview_requests[index].innerHTML.indexOf('<span class=\"pickupnumber\">') === -1)){\n                let newElement = '<p class=\"weak-text\"><span class=\"pickupnumber\">'+ this.getPickupLabel() +'</span><span>'+this._pickUpNumbersForIds[requests[index].requestId]+'</span></p>';\n                angular.element(overview_requests[index]).append(newElement);\n            }\n        }\n}\n\n    _insert(parentCtrl, targetContainer, requests, selector) {\n        let ctrl = this;\n        ctrl._runningPromise = new Promise((resolve, reject) => {\n            let targetElements = selector(targetContainer);\n            let requestObjects = ctrl._composeRequestObjects(targetElements, requests);\n            ctrl._ongoingInsertions = requestObjects.length;\n\n            // Making one promise per request\n            let inserts = [];\n            requestObjects.forEach((request, key) => {\n                inserts[key] = ctrl._insertForRequest(parentCtrl.requestsDisplay[key], request);\n                inserts[key]\n                // Instead of using both then and catch methods and counting down to see when all the promises settled\n                // one can use Promise.allSettled\n                // But it is not supported in ie and some other browsers yet\n                    .then(()=>{\n                    ctrl._ongoingInsertions = ctrl._ongoingInsertions - 1;\n                        if (ctrl._ongoingInsertions === 0) {\n                            this.insertPickupnumbersToOverview(requests);\n                            resolve();\n                        }\n                    })\n                    .catch(()=>{\n                        ctrl._ongoingInsertions = ctrl._ongoingInsertions - 1;\n                        if (ctrl._ongoingInsertions === 0) {\n                            this.insertPickupnumbersToOverview(requests);\n                            resolve();\n                        }\n                    })\n            });\n        });\n\n        return this._runningPromise;\n    }\n\n    // Returns an array of objects with request related data.\n    _composeRequestObjects(targetElements, requests) {\n        return requests.map((request, index) => {\n            return {\n                element: targetElements[index],\n                id: request.requestId,\n                expandedDisplay: request.expandedDisplay,\n                isAlert: request.isAlert  // isAlert is a Primo field, that most likely says if a booking is ready for pickup or not\n            }\n        });\n    };\n\n    // Inserts the pickup number for given request.\n    _insertForRequest(requestsDisplay, request) {\n        let ctrl = this;\n        return new Promise((resolve, reject) => {\n            // If there is no DOM element to be altered,\n            // do nothing.\n            if (!request.element) {\n                reject();\n                return;\n            }\n            if (ctrl._pickUpNumbersForIds[request.id]) {\n                // If the pick-up number for the request is already known, use it.\n                // ctrl._replaceIdText(request, ctrl._pickUpNumbersForIds[request.id]);\n                this.insertPickUpNumber(ctrl._pickUpNumbersForIds[request.id], request.element);\n                resolve();\n            } else if (request.isAlert) {\n                // Else, if isAlert set to true, retrieve and insert the pick-up number.\n                // The requested item can probably only have a pick up number if its isAlert is set to true.\n                    ctrl._retrievePickUpNumber(request.id)\n                        .then(response => {\n                            // Insert the pick-up number text.\n                            let pickUpNumber = response.data.number;\n                            ctrl._pickUpNumbersForIds[request.id] = pickUpNumber;\n                            this.insertPickUpNumber(pickUpNumber, request.element);\n                            resolve();\n                        })\n                        .catch(err => {\n                            // ctrl._removeIdText(request);\n                            console.log('Could not retrieve the pick up number.');\n                            reject(err);\n                            return err;\n                        });\n\n            } else {\n                resolve();\n            }\n\n        });\n\n    }\n\n    // Retrieves the pick up numbers from the associated service.\n    // Request URL may look like the following.\n    _retrievePickUpNumber(requestId) {\n        return this.$http.get(this.getServiceBaseUrl() + requestId);\n    }\n\n\n}\n\nPickUpNumbersService.$inject = ['$http', '$location'];","class PrmRequestsAfterController {\n\n    constructor($scope, $element, pickUpNumbersService) {\n        this.$scope = $scope;\n        this.$element = $element;\n        this.pickUpNumbersService = pickUpNumbersService;\n    }\n\n    $onInit() {\n        this.parentElement = this.$element.parent()[0];\n        this.pickUpNumbersService.waitForIdsAndInsertPickUpNumbers(this);\n    }\n\n    selector(element) {\n        return element.querySelectorAll('md-list-item');\n    }\n\n}\n\nPrmRequestsAfterController.$inject = ['$scope', '$element', 'pickUpNumbersService'];\n\nexport let PrmRequestsAfterConfig = {\n    name: 'prmRequestsAfter',\n    config: {\n        bindings: {\n            parentCtrl: '<'\n        },\n        controller: PrmRequestsAfterController,\n    }\n}","/**\n * Service to get translations from API.\n */\nexport class GetTranslationsService {\n    constructor($http) {\n        this.$http = $http;\n    }\n\n    // Retrieves translations from the API\n    _getTranslations(language, view){\n        console.log('language, view:', language, view);\n        return this.$http.get(`/primaws/rest/pub/translations/${view}?lang=${language}`);\n    }\n\n\n}\n\nGetTranslationsService.$inject = ['$http'];","class PrmPreFiltersAfterController {\n    constructor($element, getTranslationsService, $location) {\n        this.$element = $element;\n        this.getTranslationsService = getTranslationsService;\n        this.location = $location;\n    }\n\n    $postLink() {\n\n        // Do these operations only in Special view\n        if (this.location.search().vid.indexOf(\"SPEC\") || this.location.search().vid.indexOf(\"spec\")) {\n            // 1- Move the yellow search scope element into the search bar\n            // Find parent element\n            let parentElement = angular.element(document.querySelector('prm-search-bar form > div > div'));\n            // Add the element as the first child of the parent\n            parentElement.prepend(document.getElementById('specialViewSearchScope'));\n\n\n            // 2- Change placeholder text in the search bar\n            // First hide the placeholder so the default one won't appear\n            // Get the translation from the API\n            // Wait 500 milliseconds, so the default translation for placeholder comes first\n            // And then overwrite the placeholder text and make it visible\n            angular.element(document.getElementById('searchBar')).addClass('hidePlaceholder');\n\n            let lang = this.location.search().lang || 'da';\n            let viewName = this.location.search().vid;\n            console.log('viewName:',viewName);\n            this.changeSearchBarPlaceholder(lang, viewName);\n        }\n\n\n\n    }\n\n    changeSearchBarPlaceholder(lang, viewName){\n        this.getTranslationsService._getTranslations(lang, viewName)\n            .then(response => {\n                let placeHolderText = response.data[\"fulldisplay.homepage.special.search.placeholder\"];\n                setTimeout(function(){\n                    angular.element(document.getElementById('searchBar')).removeClass('hidePlaceholder');\n                    angular.element(document.getElementById('searchBar')).attr('placeholder', placeHolderText);\n                }, 500);\n            })\n            .catch(err => {\n                console.log( err);\n                return err;\n            });\n    }\n}\n\nPrmPreFiltersAfterController.$inject = ['$element', 'getTranslationsService', '$location'];\n\nexport let PrmPreFiltersAfterConfig = {\n    name: 'prmPreFiltersAfter',\n    config: {\n        bindings: {\n            parentCtrl: '<'\n        },\n        controller: PrmPreFiltersAfterController,\n        templateUrl: [\"viewName\", function(viewName){\n            return 'custom/' + viewName + '/html/special-view/search-scope.html';\n        }],\n    }\n};","!function r(s,a,c){function u(e,n){if(!a[e]){if(!s[e]){var t=\"function\"==typeof require&&require;if(!n&&t)return t(e,!0);if(l)return l(e,!0);var o=new Error(\"Cannot find module '\"+e+\"'\");throw o.code=\"MODULE_NOT_FOUND\",o}var i=a[e]={exports:{}};s[e][0].call(i.exports,function(n){return u(s[e][1][n]||n)},i,i.exports,r,s,a,c)}return a[e].exports}for(var l=\"function\"==typeof require&&require,n=0;n<c.length;n++)u(c[n]);return u}({1:[function(n,e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(n,e,t){return e&&i(n.prototype,e),t&&i(n,t),n};function i(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function r(n,e,t,o){var i=this;!function(n,e){if(!(n instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,r),this.$translate=n,this.$mdToast=e,this.$rootScope=t,this.$cookies=o,this._dismissed=!1,this.$rootScope.$on(\"$translateChangeSuccess\",function(){i._dismissed=!1})}(t.AnnouncementService=(o(r,[{key:\"_dismiss\",value:function(){this._dismissed=!0,this._toastPromise=null}},{key:\"display\",value:function(o){var i=this;return new Promise(function(e,t){!0!==i._dismissed?i.$translate(\"nui.message.announcement\").then(function(n){if(i.$cookies.get(\"announcement\")!==n){if(!n||[\"announcement\",\"&nbsp;\",\"\"].includes(n))return i._toastPromise&&!i._dismissed&&i.$mdToast.hide(),void t(\"No announcement found.\");i._toastPromise=i._toastPromise||i.$mdToast.show({hideDelay:!1,position:\"top\",controller:function(){return{close:function(){i.$mdToast.hide(),i.$translate(\"nui.message.announcement\").then(function(n){return i.$cookies.put(\"announcement\",n)})}}},controllerAs:\"$ctrl\",template:'\\n<md-toast class=\"page-notification\" style=\"top: 0px; position: sticky !important;\">\\n    <div class=\"md-toast-content\" style=\"box-shadow:none; width: 100%;\">\\n        <span class=\\'md-toast-text\\' flex translate=\\'nui.message.announcement\\'>\\n  </span>\\n    </div>\\n    <a class=\"close\" ng-click=\\'$ctrl.close()\\' aria-label=\"{{\\'nui.message.dismiss\\' | translate}}\"\\n       style=\"position: absolute; right: 1.5rem; top: 1.5rem;\">\\n        <prm-icon icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"close\">\\n        </prm-icon>\\n    </a>\\n</md-toast>\\n          '}),i._toastPromise.then(o).catch(o).then(function(){return i._dismiss()}),e()}else t(\"The announcement has been dismissed before.\")}):t(\"The announcement has been dismissed.\")})}}]),r)).$inject=[\"$translate\",\"$mdToast\",\"$rootScope\",\"$cookies\"]},{}],2:[function(n,e,t){\"use strict\";function o(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}Object.defineProperty(t,\"__esModule\",{value:!0});var i=(function(n,e,t){return e&&o(n.prototype,e),t&&o(n,t),n}(r,[{key:\"$onInit\",value:function(){this.announcementService.display().catch(function(n){n&&console.log(n)})}}]),r);function r(n,e,t,o){!function(n,e){if(!(n instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,r),this.announcementService=n,this.$scope=e,this.$element=t,this.$translate=o}i.$inject=[\"announcementService\",\"$scope\",\"$element\",\"$translate\"];t.PrmTopbarAfterConfig={name:\"prmTopbarAfter\",config:{controller:i,require:{primoExploreCtrl:\"^primoExplore\"}}}},{}],3:[function(n,e,t){\"use strict\";var o=n(\"./announcement/announcement.service\"),i=n(\"./announcement/prmTopbarAfter.component\");angular.module(\"viewCustom\").service(\"announcementService\",o.AnnouncementService).component(i.PrmTopbarAfterConfig.name,i.PrmTopbarAfterConfig.config)},{\"./announcement/announcement.service\":1,\"./announcement/prmTopbarAfter.component\":2}]},{},[3]);","!function i(a,u,f){function s(n,e){if(!u[n]){if(!a[n]){var r=\"function\"==typeof require&&require;if(!e&&r)return r(n,!0);if(c)return c(n,!0);var t=new Error(\"Cannot find module '\"+n+\"'\");throw t.code=\"MODULE_NOT_FOUND\",t}var o=u[n]={exports:{}};a[n][0].call(o.exports,function(e){return s(a[n][1][e]||e)},o,o.exports,i,a,u,f)}return u[n].exports}for(var c=\"function\"==typeof require&&require,e=0;e<f.length;e++)s(f[e]);return s}({1:[function(e,n,r){\"use strict\";function t(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,\"value\"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}Object.defineProperty(r,\"__esModule\",{value:!0});var o=(function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(i,[{key:\"$postLink\",value:function(){this.isLoggedIn&&angular.element(document).ready(function(){var e=angular.element(document.querySelector('div[data-main-menu-item=\"new_user\"]'));e&&0!==e.length&&e.css(\"display\",\"none\")})}}]),i);function i(){!function(e,n){if(!(e instanceof n))throw new TypeError(\"Cannot call a class as a function\")}(this,i),this.isLoggedIn=this.parentCtrl.isLoggedIn}r.PrmTopNavBarLinksAfterConfig={name:\"prmTopNavBarLinksAfter\",config:{bindings:{parentCtrl:\"<\"},controller:o}}},{}],2:[function(e,n,r){\"use strict\";var t=e(\"./hide-new-user-if-loggedin/prmTopNavBarLinksAfter.component\");angular.module(\"viewCustom\").component(t.PrmTopNavBarLinksAfterConfig.name,t.PrmTopNavBarLinksAfterConfig.config)},{\"./hide-new-user-if-loggedin/prmTopNavBarLinksAfter.component\":1}]},{},[2]);"]}